{"id":"agent-island-aj3","title":"Usage dashboard: prettier compact cards + Gemini 24h window","description":"## Problem\\nThe Usage/Profiles cards were readable but cramped; reset times wrapped. Gemini window is effectively 24h (not 5h).\\n\\n## Expected\\n- Gemini shows 24h window label\\n- Usage window rows stay single-line (no wrapping)\\n- Bars look like a compact segmented meter (similar to [||||||-----])","status":"closed","priority":1,"issue_type":"chore","owner":"icedac@gmail.com","estimated_minutes":60,"created_at":"2026-02-06T01:04:59.850309+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T01:05:14.645443+09:00","closed_at":"2026-02-06T01:05:14.645443+09:00","close_reason":"Gemini now displays 24h window; usage rows stay single-line; segmented bars match compact [|||||-----] look; duration formatting improved. Verified xcodebuild Debug (CODE_SIGNING_ALLOWED=NO) + Release builds succeeded.","labels":["phase:review"]}
{"id":"agent-island-aj3.1","title":"State change: phase → review","description":"Set phase to review\n\nReason: Updated Usage cards: Gemini uses 24h label, window rows no longer wrap (no Spacer; trailing takes remaining width), segmented meter bar, improved duration formatting with zero-padded minutes. Verified xcodebuild Debug (CODE_SIGNING_ALLOWED=NO) + Release builds succeeded.","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-06T01:05:10.096829+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T01:05:18.171224+09:00","closed_at":"2026-02-06T01:05:18.171224+09:00","close_reason":"Event recorded","dependencies":[{"issue_id":"agent-island-aj3.1","depends_on_id":"agent-island-aj3","type":"parent-child","created_at":"2026-02-06T01:05:10.098033+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-dpk","title":"Usage dashboard: show Current snapshot when no profiles","description":"## Problem\\nProfiles/Usage screen shows 'No profiles yet' even when Claude/Codex/Gemini logins exist on this machine. This is confusing; users expect at least a 'current credentials' snapshot without needing to press Save Profile first.\\n\\n## Repro\\n1. Ensure local CLI logins exist (Claude/Codex/Gemini).\\n2. Open app → Usage/Profiles.\\n3. Observe empty state: 'No profiles yet'.\\n\\n## Expected\\nShow a 'Current (unsaved)' row (or similar) using current machine credentials, and allow Refresh to fetch usage, even if no saved profiles exist.\\n\\n## Notes\\nDocker-based usage scripts can't access macOS Keychain; we need to export creds into a temp HOME for the container run.","status":"closed","priority":0,"issue_type":"bug","owner":"icedac@gmail.com","estimated_minutes":120,"created_at":"2026-02-06T00:18:44.63453+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T00:30:37.993793+09:00","closed_at":"2026-02-06T00:30:37.993793+09:00","close_reason":"Fix: Usage/Profiles shows a 'Current (unsaved)' row and fetches usage from live CLI creds (exported to temp HOME for docker). Verified: xcodebuild Debug build (CODE_SIGNING_ALLOWED=NO) succeeded; xcodebuild Release build (codesigned) succeeded.","labels":["phase:review"]}
{"id":"agent-island-dpk.1","title":"State change: phase → review","description":"Set phase to review\n\nReason: Show Current (unsaved) usage row using live CLI creds exported into temp HOME for docker usage script; xcodebuild Debug+Release build succeeded.","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-06T00:30:29.576018+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T00:31:05.936469+09:00","closed_at":"2026-02-06T00:31:05.936469+09:00","close_reason":"Event recorded","dependencies":[{"issue_id":"agent-island-dpk.1","depends_on_id":"agent-island-dpk","type":"parent-child","created_at":"2026-02-06T00:30:29.576759+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-drn","title":"Usage profiles and subscription dashboard","description":"Spec: docs/usage-profiles.spec.md","status":"closed","priority":0,"issue_type":"epic","owner":"icedac@gmail.com","created_at":"2026-02-05T16:45:40.896376+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-05T19:17:45.658668+09:00","closed_at":"2026-02-05T19:17:45.658668+09:00","close_reason":"Epic complete: usage dashboard default view + profile save/switch + docker-based usage fetcher shipped. Verified xcodebuild Debug build OK (CODE_SIGNING_ALLOWED=NO) and script smoke tests OK.","labels":["phase:review"],"comments":[{"id":1,"issue_id":"agent-island-drn","author":"Zhuge Hyuk","text":"Note: work was rebased after close; final commits on branch usage-profiles: ab477a7 (docker usage fetcher), 50e918e (usage dashboard UI), 2ccf0ab (profile save/switch), 2246c22 (stage usage script + docker context retry), b6ad0b3 (Mixpanel safe wrapper).","created_at":"2026-02-05T10:21:10Z"},{"id":6,"issue_id":"agent-island-drn","author":"Zhuge Hyuk","text":"Update: GitHub push protection flagged hard-coded Google OAuth client id/secret in vendored check-usage.js; sanitized to env-based GEMINI_OAUTH_CLIENT_ID/GEMINI_OAUTH_CLIENT_SECRET (refresh skipped if unset) and rewrote branch history. Final commits on origin/usage-profiles: d4c1a1d (docker usage fetcher + sanitized script), b2d0c77 (usage dashboard UI), f604796 (profile save/switch), df02abe (script staging + docker context retry), 5cba643 (Mixpanel safe wrapper).","created_at":"2026-02-05T10:29:26Z"}]}
{"id":"agent-island-drn.1","title":"Add usage models and parsing","description":"Add usage JSON models and parser helpers.","acceptance_criteria":"Models decode check-usage JSON.","status":"closed","priority":0,"issue_type":"task","owner":"icedac@gmail.com","estimated_minutes":60,"created_at":"2026-02-05T16:45:46.621179+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-05T16:52:26.857947+09:00","closed_at":"2026-02-05T16:52:26.857947+09:00","close_reason":"Closed","dependencies":[{"issue_id":"agent-island-drn.1","depends_on_id":"agent-island-drn","type":"parent-child","created_at":"2026-02-05T16:45:46.621801+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-drn.2","title":"Implement account and profile store","description":"Persist accounts and profiles in accounts.json.","acceptance_criteria":"Profiles load and save with shared accounts.","status":"closed","priority":0,"issue_type":"task","owner":"icedac@gmail.com","estimated_minutes":60,"created_at":"2026-02-05T16:45:50.619223+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-05T16:52:31.180606+09:00","closed_at":"2026-02-05T16:52:31.180606+09:00","close_reason":"Closed","dependencies":[{"issue_id":"agent-island-drn.2","depends_on_id":"agent-island-drn","type":"parent-child","created_at":"2026-02-05T16:45:50.619839+09:00","created_by":"Zhuge Hyuk"},{"issue_id":"agent-island-drn.2","depends_on_id":"agent-island-drn.1","type":"blocks","created_at":"2026-02-05T16:46:18.314975+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-drn.3","title":"Add credential exporter","description":"Export current Claude/Codex/Gemini credentials into account roots.","acceptance_criteria":"Account roots contain service credential files.","status":"closed","priority":0,"issue_type":"task","owner":"icedac@gmail.com","estimated_minutes":60,"created_at":"2026-02-05T16:45:54.167974+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-05T16:52:36.821051+09:00","closed_at":"2026-02-05T16:52:36.821051+09:00","close_reason":"Closed","dependencies":[{"issue_id":"agent-island-drn.3","depends_on_id":"agent-island-drn","type":"parent-child","created_at":"2026-02-05T16:45:54.168547+09:00","created_by":"Zhuge Hyuk"},{"issue_id":"agent-island-drn.3","depends_on_id":"agent-island-drn.2","type":"blocks","created_at":"2026-02-05T16:46:21.519253+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-drn.4","title":"Add docker usage fetcher","description":"Implement UsageFetcher + UsageCache in ClaudeIsland/Services/Usage, bundle ClaudeIsland/Resources/UsageScripts/check-usage.js, build temp HOME from account roots, run docker node:20-alpine check-usage.js --json, parse CheckUsageOutput, cache ~60s, surface errors.","acceptance_criteria":"check-usage JSON parsed into usage snapshots.","status":"closed","priority":0,"issue_type":"task","owner":"icedac@gmail.com","estimated_minutes":90,"created_at":"2026-02-05T16:45:59.148264+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-05T19:16:55.510234+09:00","closed_at":"2026-02-05T19:16:55.510234+09:00","close_reason":"Implemented UsageFetcher/UsageCache + vendored check-usage.js (cf476ef) + staging+docker-context retry fix (0ec67c7). Verified: xcodebuild Debug build OK (CODE_SIGNING_ALLOWED=NO), swiftc scripts/UsageFetcherTests.swift OK.","labels":["phase:review"],"dependencies":[{"issue_id":"agent-island-drn.4","depends_on_id":"agent-island-drn","type":"parent-child","created_at":"2026-02-05T16:45:59.14882+09:00","created_by":"Zhuge Hyuk"},{"issue_id":"agent-island-drn.4","depends_on_id":"agent-island-drn.1","type":"blocks","created_at":"2026-02-05T16:46:25.760698+09:00","created_by":"Zhuge Hyuk"},{"issue_id":"agent-island-drn.4","depends_on_id":"agent-island-drn.2","type":"blocks","created_at":"2026-02-05T16:46:28.612391+09:00","created_by":"Zhuge Hyuk"}],"comments":[{"id":2,"issue_id":"agent-island-drn.4","author":"Zhuge Hyuk","text":"Note: rebased after close. Final commits on usage-profiles: ab477a7 (initial UsageFetcher/UsageCache + vendored script), 2246c22 (stage script into temp HOME + retry desktop-linux docker context).","created_at":"2026-02-05T10:21:18Z"},{"id":7,"issue_id":"agent-island-drn.4","author":"Zhuge Hyuk","text":"Update: final commits on origin/usage-profiles after secret-sanitizing rewrite: d4c1a1d (UsageFetcher/UsageCache + vendored script, with Gemini refresh client id/secret removed), df02abe (stage script into temp HOME + retry desktop-linux docker context).","created_at":"2026-02-05T10:29:31Z"}]}
{"id":"agent-island-drn.4.1","title":"State change: phase → review","description":"Set phase to review\n\nReason: UsageFetcher/UsageCache implemented; xcodebuild Debug build OK (CODE_SIGNING_ALLOWED=NO); swiftc scripts/UsageFetcherTests.swift OK; docker run stages check-usage.js into temp HOME and retries desktop-linux context on MODULE_NOT_FOUND.","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-05T19:16:46.715597+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-05T19:16:46.715597+09:00","closed_at":"2026-02-05T19:16:47.715597+09:00","dependencies":[{"issue_id":"agent-island-drn.4.1","depends_on_id":"agent-island-drn.4","type":"parent-child","created_at":"2026-02-05T19:16:46.716209+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-drn.5","title":"Build usage dashboard UI","description":"Add UsageDashboardView + navigation: introduce NotchContentType.usage default, wire NotchView switch, add menu rows for 구독 사용량 and 클로드 세션 리스트, add sessions preview that links to instances list.","acceptance_criteria":"Usage screen is default and menu links work.","status":"closed","priority":0,"issue_type":"task","owner":"icedac@gmail.com","estimated_minutes":120,"created_at":"2026-02-05T16:46:02.817688+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-05T19:17:05.463255+09:00","closed_at":"2026-02-05T19:17:05.463255+09:00","close_reason":"Added UsageDashboardView + notch/menu navigation (4aaa79e). Verified: xcodebuild Debug build OK (CODE_SIGNING_ALLOWED=NO).","labels":["phase:review"],"dependencies":[{"issue_id":"agent-island-drn.5","depends_on_id":"agent-island-drn","type":"parent-child","created_at":"2026-02-05T16:46:02.818235+09:00","created_by":"Zhuge Hyuk"},{"issue_id":"agent-island-drn.5","depends_on_id":"agent-island-drn.4","type":"blocks","created_at":"2026-02-05T16:46:32.815277+09:00","created_by":"Zhuge Hyuk"}],"comments":[{"id":3,"issue_id":"agent-island-drn.5","author":"Zhuge Hyuk","text":"Note: rebased after close. Final commit on usage-profiles: 50e918e.","created_at":"2026-02-05T10:21:22Z"},{"id":8,"issue_id":"agent-island-drn.5","author":"Zhuge Hyuk","text":"Update: final commit on origin/usage-profiles after rewrite: b2d0c77.","created_at":"2026-02-05T10:29:36Z"}]}
{"id":"agent-island-drn.5.1","title":"State change: phase → review","description":"Set phase to review\n\nReason: UsageDashboardView + Notch navigation/menu wired (default contentType .usage). Verified compile via xcodebuild Debug build OK (CODE_SIGNING_ALLOWED=NO).","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-05T19:16:59.824361+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-05T19:16:59.824361+09:00","closed_at":"2026-02-05T19:17:00.824361+09:00","dependencies":[{"issue_id":"agent-island-drn.5.1","depends_on_id":"agent-island-drn.5","type":"parent-child","created_at":"2026-02-05T19:16:59.825084+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-drn.6","title":"Profile save and experimental switch","description":"Implement ProfileSwitcher using AccountStore/ProfileStore/CredentialExporter: save profile links to accounts.json, export current credentials into account roots, add experimental switch to copy credentials back into ~/.claude ~/.codex ~/.gemini with confirmation.","acceptance_criteria":"Profile save works; switch is best-effort.","status":"closed","priority":1,"issue_type":"task","owner":"icedac@gmail.com","estimated_minutes":90,"created_at":"2026-02-05T16:46:07.435868+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-05T19:17:15.419009+09:00","closed_at":"2026-02-05T19:17:15.419009+09:00","close_reason":"Profile save + experimental switch implemented (6c7f94a). Verified: swiftc scripts/ProfileSwitcherTests.swift OK; xcodebuild Debug build OK (CODE_SIGNING_ALLOWED=NO).","labels":["phase:review"],"dependencies":[{"issue_id":"agent-island-drn.6","depends_on_id":"agent-island-drn","type":"parent-child","created_at":"2026-02-05T16:46:07.436443+09:00","created_by":"Zhuge Hyuk"},{"issue_id":"agent-island-drn.6","depends_on_id":"agent-island-drn.2","type":"blocks","created_at":"2026-02-05T16:46:35.966461+09:00","created_by":"Zhuge Hyuk"},{"issue_id":"agent-island-drn.6","depends_on_id":"agent-island-drn.3","type":"blocks","created_at":"2026-02-05T16:46:40.647628+09:00","created_by":"Zhuge Hyuk"}],"comments":[{"id":4,"issue_id":"agent-island-drn.6","author":"Zhuge Hyuk","text":"Note: rebased after close. Final commit on usage-profiles: 2ccf0ab.","created_at":"2026-02-05T10:21:26Z"},{"id":9,"issue_id":"agent-island-drn.6","author":"Zhuge Hyuk","text":"Update: final commit on origin/usage-profiles after rewrite: f604796.","created_at":"2026-02-05T10:29:41Z"}]}
{"id":"agent-island-drn.6.1","title":"State change: phase → review","description":"Set phase to review\n\nReason: Implemented ProfileSwitcher save+switch flows + UI wiring (6c7f94a). Verified: swiftc scripts/ProfileSwitcherTests.swift OK; xcodebuild Debug build OK (CODE_SIGNING_ALLOWED=NO).","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-05T19:17:10.94996+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-05T19:17:10.94996+09:00","closed_at":"2026-02-05T19:17:11.94996+09:00","dependencies":[{"issue_id":"agent-island-drn.6.1","depends_on_id":"agent-island-drn.6","type":"parent-child","created_at":"2026-02-05T19:17:10.950694+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-drn.7","title":"Verification smoke checks","description":"Run xcodebuild Debug build and manual smoke checks for usage dashboard default view, navigation, docker usage fetch, profile save and switch; record results before closing.","acceptance_criteria":"Usage fetch and navigation validated.","status":"closed","priority":1,"issue_type":"task","owner":"icedac@gmail.com","estimated_minutes":45,"created_at":"2026-02-05T16:46:11.038618+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-05T19:17:29.811212+09:00","closed_at":"2026-02-05T19:17:29.811212+09:00","close_reason":"Smoke checks complete: xcodebuild Debug build OK (CODE_SIGNING_ALLOWED=NO). Script tests OK: UsageModelsTests, AccountStoreTests, CredentialExporterTests, UsageFetcherTests, ProfileSwitcherTests. Single-instance early-terminate no longer triggers Mixpanel mainInstance assertion (ec72408).","labels":["phase:review"],"dependencies":[{"issue_id":"agent-island-drn.7","depends_on_id":"agent-island-drn","type":"parent-child","created_at":"2026-02-05T16:46:11.039219+09:00","created_by":"Zhuge Hyuk"},{"issue_id":"agent-island-drn.7","depends_on_id":"agent-island-drn.5","type":"blocks","created_at":"2026-02-05T16:46:43.556158+09:00","created_by":"Zhuge Hyuk"},{"issue_id":"agent-island-drn.7","depends_on_id":"agent-island-drn.6","type":"blocks","created_at":"2026-02-05T16:46:46.987789+09:00","created_by":"Zhuge Hyuk"}],"comments":[{"id":5,"issue_id":"agent-island-drn.7","author":"Zhuge Hyuk","text":"Note: rebased after close. Mixpanel safe wrapper commit: b6ad0b3.","created_at":"2026-02-05T10:21:30Z"},{"id":10,"issue_id":"agent-island-drn.7","author":"Zhuge Hyuk","text":"Update: final verification/Mixpanel safety commit on origin/usage-profiles after rewrite: 5cba643.","created_at":"2026-02-05T10:29:46Z"}]}
{"id":"agent-island-drn.7.1","title":"State change: phase → review","description":"Set phase to review\n\nReason: Verification: xcodebuild Debug build OK (CODE_SIGNING_ALLOWED=NO); swiftc scripts/*Tests.swift (UsageModels/AccountStore/CredentialExporter/UsageFetcher/ProfileSwitcher) all OK; launched Debug app while Release instance running to validate single-instance termination path (no Mixpanel assertion after ec72408).","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-05T19:17:24.863087+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-05T19:17:24.863087+09:00","closed_at":"2026-02-05T19:17:25.863087+09:00","dependencies":[{"issue_id":"agent-island-drn.7.1","depends_on_id":"agent-island-drn.7","type":"parent-child","created_at":"2026-02-05T19:17:24.86374+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-drn.8","title":"State change: phase → review","description":"Set phase to review\n\nReason: All child tasks (.1-.7) completed; xcodebuild Debug build OK (CODE_SIGNING_ALLOWED=NO); script smoke tests OK; usage dashboard + profiles + docker fetcher implemented on usage-profiles branch.","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-05T19:17:39.983758+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-05T19:17:39.983758+09:00","closed_at":"2026-02-05T19:17:40.983758+09:00","dependencies":[{"issue_id":"agent-island-drn.8","depends_on_id":"agent-island-drn","type":"parent-child","created_at":"2026-02-05T19:17:39.984436+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-q1y","title":"Usage dashboard: show account email + remaining quota + time windows","description":"## Problem\\nCurrent Usage/Profiles UI shows only compact '5h/7d' numbers (e.g. 1/2) and does not surface which account is logged in. Users want to see:\\n- account identifier (email)\\n- remaining quota (or used+remaining)\\n- time window (5h / 7d) and time until reset\\n\\n## Expected\\nFor each service (Claude/Codex/Gemini), show email (best-effort) and detailed usage lines per window (5h, 7d): percent + reset time remaining, with a simple bar indicator.","status":"closed","priority":0,"issue_type":"feature","owner":"icedac@gmail.com","estimated_minutes":180,"created_at":"2026-02-06T00:46:48.782439+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T00:55:15.767852+09:00","closed_at":"2026-02-06T00:55:15.767852+09:00","close_reason":"Implemented detailed Usage/Profiles cards: show account email (Claude via /api/oauth/profile; Codex/Gemini via JWT email claim), remaining % + reset countdown per window (5h/7d). Verified xcodebuild Debug (CODE_SIGNING_ALLOWED=NO) + Release builds succeeded.","labels":["phase:review"]}
{"id":"agent-island-q1y.1","title":"State change: phase → review","description":"Set phase to review\n\nReason: Usage dashboard now shows per-service email (best-effort) + remaining quota percent + reset countdown for 5h/7d windows. Verified xcodebuild Debug build (CODE_SIGNING_ALLOWED=NO) and Release build succeed.","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-06T00:55:07.144183+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T00:55:27.648428+09:00","closed_at":"2026-02-06T00:55:27.648428+09:00","close_reason":"Event recorded","dependencies":[{"issue_id":"agent-island-q1y.1","depends_on_id":"agent-island-q1y","type":"parent-child","created_at":"2026-02-06T00:55:07.144855+09:00","created_by":"Zhuge Hyuk"}]}
