{"id":"agent-island-1sd","title":"Usage: background refresh on app launch","description":"Goal\\n- Preload usage data when the app launches and keep it refreshed in the background.\\n\\nAcceptance\\n- On app launch: triggers an immediate usage refresh (Current + saved profiles).\\n- While app is running: refreshes every 10 minutes automatically, even if the Usage screen is not open.\\n- Manual Refresh button still works.\\n\\nNotes\\n- Implement as an idempotent start method on the shared UsageDashboardViewModel and start it from AppDelegate.","acceptance_criteria":"- Verified by code + builds: xcodebuild Debug (CODE_SIGNING_ALLOWED=NO) + Release succeed.","status":"closed","priority":1,"issue_type":"task","owner":"icedac@gmail.com","estimated_minutes":30,"created_at":"2026-02-06T03:34:35.083984+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T03:37:39.066457+09:00","closed_at":"2026-02-06T03:37:39.066457+09:00","close_reason":"Evidence: xcodebuild Debug OK (CODE_SIGNING_ALLOWED=NO) + Release OK; script tests OK: UsageModelsTests, AccountStoreTests, CredentialExporterTests, UsageFetcherTests, ProfileSwitcherTests. Background refresh now starts on app launch (AppDelegate) and refreshes every 10 minutes via shared UsageDashboardViewModel, even when Usage screen isn't open.","labels":["phase:review"]}
{"id":"agent-island-1sd.1","title":"State change: phase → review","description":"Set phase to review\n\nReason: Verified: xcodebuild Debug build OK (CODE_SIGNING_ALLOWED=NO) + Release build OK; script tests OK (UsageModels/AccountStore/CredentialExporter/UsageFetcher/ProfileSwitcher). Started shared UsageDashboardViewModel background refresh from AppDelegate on app launch; auto refresh continues every 10 minutes regardless of UI visibility.","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-06T03:37:25.067495+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T03:37:43.565161+09:00","closed_at":"2026-02-06T03:37:43.565161+09:00","close_reason":"Event recorded","dependencies":[{"issue_id":"agent-island-1sd.1","depends_on_id":"agent-island-1sd","type":"parent-child","created_at":"2026-02-06T03:37:25.068097+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-2ab","title":"Usage: reset countdown notifications + live timer","description":"Add reset-time alerting: when 5h reset has \u003c=1h remaining, show live countdown and pop the Island every 10m with account + remaining time. When 7d reset has \u003c=6h remaining, pop the Island every 1h; when \u003c=1h, every 10m; when \u003c=10m, keep Island open and show live 10-minute countdown list (include all overlapping accounts).","acceptance_criteria":"- 5h: \u003c=1h remaining shows live countdown (updates every second) and Island pops every 10m showing account + remaining\\n- 7d: \u003c=6h remaining triggers hourly Island pops; \u003c=1h triggers every 10m; \u003c=10m keeps Island open with live countdown\\n- If multiple accounts overlap, Island shows list of all with remaining reset times\\n- No focus stealing; should not interrupt user typing\\n- App builds (Debug/Release) + make up installs","status":"closed","priority":0,"issue_type":"task","owner":"icedac@gmail.com","estimated_minutes":180,"created_at":"2026-02-06T04:15:56.757527+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T04:30:30.882601+09:00","closed_at":"2026-02-06T04:30:30.882601+09:00","close_reason":"Evidence: xcodebuild Debug build OK (CODE_SIGNING_ALLOWED=NO) + Release build OK (CODE_SIGNING_ALLOWED=NO). Script tests OK: UsageModelsTests, AccountStoreTests, CredentialExporterTests, ProfileSwitcherTests, UsageFetcherTests. make up succeeded (Release build, installed to /Applications/Claude Island.app, app quit+relaunch). Added Usage reset alerting: 5h \u003c=1h shows live countdown (m/s) + Island pops every 10m; 7d \u003c=6h pops hourly, \u003c=1h every 10m, \u003c=10m keeps Island open with live countdown list (shows all overlapping accounts).","labels":["phase:review"]}
{"id":"agent-island-2ab.1","title":"State change: phase → review","description":"Set phase to review\n\nReason: Implemented reset countdown alerting + live timers. Verified: xcodebuild Debug build OK (CODE_SIGNING_ALLOWED=NO) + Release build OK (CODE_SIGNING_ALLOWED=NO); script tests OK (UsageModels/AccountStore/CredentialExporter/ProfileSwitcher/UsageFetcher); make up succeeded (Release build + installed to /Applications + relaunch).","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-06T04:30:24.62022+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T04:30:41.621383+09:00","closed_at":"2026-02-06T04:30:41.621383+09:00","close_reason":"Event recorded","dependencies":[{"issue_id":"agent-island-2ab.1","depends_on_id":"agent-island-2ab","type":"parent-child","created_at":"2026-02-06T04:30:24.620804+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-2et","title":"Usage: show Claude TEAM badge without parentheses","description":"Claude team accounts currently show '(Team)' text. Remove parentheses and render it as a badge label (TEAM).","acceptance_criteria":"Claude team badge text is 'TEAM' (no parentheses) and remains visually a pill/badge; build + make up succeed.","status":"closed","priority":2,"issue_type":"feature","owner":"icedac@gmail.com","created_at":"2026-02-06T16:23:51.635197+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T16:24:58.836101+09:00","closed_at":"2026-02-06T16:24:58.836101+09:00","close_reason":"Claude team accounts now show a TEAM badge (no parentheses) in the header. Verified: xcodebuild Release build succeeded; make up succeeded.","labels":["phase:review"]}
{"id":"agent-island-2et.1","title":"State change: phase → review","description":"Set phase to review\n\nReason: Changed Claude team badge text from '(Team)' to 'TEAM' (badge style only; no parentheses). Verified: xcodebuild Release build succeeded; make up succeeded (install + relaunch).","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-06T16:24:58.744943+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T16:24:58.914628+09:00","closed_at":"2026-02-06T16:24:58.914628+09:00","close_reason":"State-change event recorded; no further action.","dependencies":[{"issue_id":"agent-island-2et.1","depends_on_id":"agent-island-2et","type":"parent-child","created_at":"2026-02-06T16:24:58.745669+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-364","title":"Switch profile 후 Codex auth.json id_token 누락 방지","description":"사용자가 switch profile 이후 codex 실행 시 'missing field id_token' 오류를 겪음. 현재 active ~/.codex/auth.json에는 id_token이 없고, 저장된 profile account snapshot의 .codex/auth.json에는 id_token이 존재. active auth 파일이 최소 token 형태로 덮어써지는 경로를 차단하고, profile switch 이후 codex schema 보존 보장을 추가해야 함.","acceptance_criteria":"1) switch profile 이후 ~/.codex/auth.json에 tokens.id_token이 유지된다. 2) UsageFetcher/테스트 경로에서 active home credential overwrite가 테스트 실행으로 발생하지 않는다. 3) 회귀 테스트로 id_token 보존을 검증한다.","notes":"Investigation: tests calling fetchCurrentSnapshot(credentials:) were persisting synthetic codex tokens into active ~/.codex/auth.json; ProfileSwitcher also copied codex snapshots even when id_token was missing.","status":"closed","priority":0,"issue_type":"bug","owner":"icedac@gmail.com","estimated_minutes":90,"created_at":"2026-02-09T17:31:52.975585+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-09T17:41:26.761541+09:00","closed_at":"2026-02-09T17:41:26.761541+09:00","close_reason":"xcodebuild Release build OK; script tests passed (/tmp/profile-switcher-test, /tmp/usage-fetcher-test); fixed codex id_token guard on profile switch and prevented UsageFetcher test path from overwriting active home credentials.","labels":["phase:review"]}
{"id":"agent-island-364.1","title":"State change: phase → review","description":"Set phase to review\n\nReason: Implemented codex id_token guard + home-isolated UsageFetcher tests; verified by script tests and release build.","status":"open","priority":4,"issue_type":"event","created_at":"2026-02-09T17:40:55.963428+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-09T17:40:55.963428+09:00","dependencies":[{"issue_id":"agent-island-364.1","depends_on_id":"agent-island-364","type":"parent-child","created_at":"2026-02-09T17:40:55.964971+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-38z","title":"Usage: fix Claude email and show Team badge","description":"Fix identity display so Claude shows email address only (no organization name). Detect Claude Team vs Personal and display a (Team) badge next to tier badge. Keep last-known email/badges on ERR.","acceptance_criteria":"Claude email line never shows organization suffix; Team accounts show (Team) badge; Personal accounts show no team badge; on error, last known email + tier + team badge remain visible; build + make up succeed.","status":"closed","priority":1,"issue_type":"bug","owner":"icedac@gmail.com","created_at":"2026-02-06T09:37:34.308483+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T09:49:32.743435+09:00","closed_at":"2026-02-06T09:49:32.743435+09:00","close_reason":"Evidence: xcodebuild Release build OK (CODE_SIGNING_ALLOWED=NO). Script tests OK: UsageModelsTests, AccountStoreTests, CredentialExporterTests, ProfileSwitcherTests, UsageFetcherTests. make up OK (Release build, installed to /Applications/Claude Island.app, relaunch). Fix: Claude email line now uses account.email (no 'Organization' suffix) and Claude Team accounts show a (Team) badge next to tier; previous identity is kept on ERR.","labels":["phase:review"]}
{"id":"agent-island-38z.1","title":"State change: phase → review","description":"Set phase to review\n\nReason: Implemented Claude email extraction (prefer account.email; sanitize org strings) + Claude Team badge. Verified: xcodebuild Release build OK (CODE_SIGNING_ALLOWED=NO). Script tests OK: UsageModelsTests, AccountStoreTests, CredentialExporterTests, ProfileSwitcherTests, UsageFetcherTests. make up OK (Release build, installed to /Applications/Claude Island.app, relaunch).","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-06T09:49:25.760846+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T10:13:11.809058+09:00","closed_at":"2026-02-06T10:13:11.809058+09:00","close_reason":"Event recorded","dependencies":[{"issue_id":"agent-island-38z.1","depends_on_id":"agent-island-38z","type":"parent-child","created_at":"2026-02-06T09:49:25.761458+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-39w","title":"Usage: profile delete + reset alert toggle","description":"Add a Delete Profile button in the Usage profiles UI (with confirmation) and persist removal from the profile store.\\n\\nAdd a Settings toggle for usage reset timer alerts (on/off). When off, stop scheduling UsageResetAlertCoordinator popups; when on, resume. Persist via UserDefaults.\\n\\nQuality gates:\\n- xcodebuild Release build passes\\n- relevant script tests pass\\n- make up succeeds","status":"closed","priority":1,"issue_type":"feature","owner":"icedac@gmail.com","estimated_minutes":90,"created_at":"2026-02-06T17:59:55.044438+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T18:06:55.630741+09:00","closed_at":"2026-02-06T18:06:55.630741+09:00","close_reason":"xcodebuild Release build succeeded; script tests passed (UsageModelsTests, UsageFetcherTests, AccountStoreTests, CredentialExporterTests, ProfileSwitcherTests, ClaudeCodeTokenStoreTests); make up succeeded (install to /Applications + relaunch). Implemented profile delete button (with confirmation) and added Settings toggle for usage reset alerts (persisted + stop/start coordinator).","labels":["phase:review"]}
{"id":"agent-island-39w.1","title":"State change: phase → review","description":"Set phase to review\n\nReason: Added Delete Profile button (with confirmation) in Usage profiles UI; added menu Settings toggle for usage reset alerts and wired it to stop/start UsageResetAlertCoordinator; persisted via UserDefaults. Verified: xcodebuild Release build OK; script tests OK (UsageModelsTests, UsageFetcherTests, AccountStoreTests, CredentialExporterTests, ProfileSwitcherTests, ClaudeCodeTokenStoreTests); make up succeeded (installs to /Applications + relaunch).","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-06T18:06:50.911086+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T18:07:20.585335+09:00","closed_at":"2026-02-06T18:07:20.585335+09:00","close_reason":"Event recorded","dependencies":[{"issue_id":"agent-island-39w.1","depends_on_id":"agent-island-39w","type":"parent-child","created_at":"2026-02-06T18:06:50.911641+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-4cr","title":"Usage dashboard: separate error tiles with full-width separator","description":"Dashboard grid should render normal tiles first, then a full-width separator line, then error/auth-expired tiles. Error tiles should start at the first column (no indentation from partial rows).","acceptance_criteria":"When both normal and error tiles exist: separator is full-width and error tiles start at column 1; layout remains 3-column grid.","status":"closed","priority":1,"issue_type":"feature","owner":"icedac@gmail.com","created_at":"2026-02-06T14:57:06.172695+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T14:58:10.06642+09:00","closed_at":"2026-02-06T14:58:10.06642+09:00","close_reason":"Dashboard now renders normal tiles in a 3-col grid, then a full-width separator line, then error/auth-expired tiles in a fresh 3-col grid (errors start at column 1; no indentation from partial rows). Verified: xcodebuild Release build succeeded; make up succeeded (installs to /Applications + relaunch).","labels":["phase:review"]}
{"id":"agent-island-4cr.1","title":"State change: phase → review","description":"Set phase to review\n\nReason: Refactored Dashboard grid into two LazyVGrids separated by a full-width line so error/auth-expired tiles always start at column 1 (no indentation). Verified: xcodebuild Release build succeeded; make up succeeded (install + relaunch).","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-06T14:58:03.906192+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T14:58:13.929968+09:00","closed_at":"2026-02-06T14:58:13.929968+09:00","close_reason":"State-change event recorded; no further action.","dependencies":[{"issue_id":"agent-island-4cr.1","depends_on_id":"agent-island-4cr","type":"parent-child","created_at":"2026-02-06T14:58:03.906817+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-55p","title":"Usage: Auto refresh every 10 minutes","description":"Goal\n- Keep Refresh button, but auto-refresh usage data: initial full refresh after view loads, then full refresh every 10 minutes.\n- Always render something immediately (do not clear existing snapshots while refreshing).\n\nAcceptance\n- Usage screen triggers a full refresh on appear (Current + all saved profiles).\n- Refresh runs automatically every 10 minutes (skips if a refresh is already running).\n- Manual Refresh button still works.\n- Builds succeed (Debug CODE_SIGNING_ALLOWED=NO + Release).\n","status":"closed","priority":1,"issue_type":"task","owner":"icedac@gmail.com","estimated_minutes":45,"created_at":"2026-02-06T02:04:01.143948+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T02:06:00.792344+09:00","closed_at":"2026-02-06T02:06:00.792344+09:00","close_reason":"Auto refresh every 10 min + initial full refresh on appear (Current + all profiles); manual Refresh kept; skips if already refreshing. xcodebuild Debug(CODE_SIGNING_ALLOWED=NO)+Release succeeded; 2 files changed (+43/-6).","labels":["phase:review"]}
{"id":"agent-island-55p.1","title":"State change: phase → review","description":"Set phase to review\n\nReason: Auto-refresh: initial full refresh + 10-minute timer; manual Refresh button kept; refresh skips if already running. Verified xcodebuild Debug(CODE_SIGNING_ALLOWED=NO) + Release build.","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-06T02:05:52.748509+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T02:06:06.104798+09:00","closed_at":"2026-02-06T02:06:06.104798+09:00","close_reason":"State-change event recorded; no further action.","dependencies":[{"issue_id":"agent-island-55p.1","depends_on_id":"agent-island-55p","type":"parent-child","created_at":"2026-02-06T02:05:52.749265+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-5wa","title":"Remove duplicate Claude plan text under tier badge","description":"Delete the extra 'Plan Max 20x' line shown under the tier badge in usage cards. Keep badge/tier chips only, no secondary plan text row.","status":"closed","priority":2,"issue_type":"bug","owner":"icedac@gmail.com","created_at":"2026-02-09T19:20:42.770408+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-09T19:21:26.725171+09:00","closed_at":"2026-02-09T19:21:26.725171+09:00","close_reason":"UI cleanup complete; removed extra 'Plan ...' row from UsageProviderColumn; xcodebuild Debug build succeeded","labels":["phase:review"]}
{"id":"agent-island-5wa.1","title":"State change: phase → review","description":"Set phase to review\n\nReason: Removed duplicate Claude plan text line under tier badge; xcodebuild Debug succeeded","status":"open","priority":4,"issue_type":"event","created_at":"2026-02-09T19:21:22.79358+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-09T19:21:22.79358+09:00","dependencies":[{"issue_id":"agent-island-5wa.1","depends_on_id":"agent-island-5wa","type":"parent-child","created_at":"2026-02-09T19:21:22.79442+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-5y0","title":"Usage dashboard: include Current accounts in Dashboard grid","description":"Dashboard tab currently only aggregates saved profiles, so accounts that are only in Current (live credentials) are not shown. Include Current snapshot/accounts in the Dashboard grid while still de-duping by provider+account.","acceptance_criteria":"Dashboard shows Current accounts even if no profiles are saved; duplicates are not shown when Current matches a saved profile; build + make up succeed.","status":"closed","priority":1,"issue_type":"bug","owner":"icedac@gmail.com","created_at":"2026-02-06T11:18:38.898338+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T11:25:24.789096+09:00","closed_at":"2026-02-06T11:25:24.789096+09:00","close_reason":"Evidence: xcodebuild Release build OK (CODE_SIGNING_ALLOWED=NO). UsageFetcherTests OK. make up OK (Release build, installed to /Applications/Claude Island.app, relaunch). Fix: Dashboard grid now includes live Current accounts (even if not saved as a profile) and still de-dupes by provider+account.","labels":["phase:review"]}
{"id":"agent-island-5y0.1","title":"State change: phase → review","description":"Set phase to review\n\nReason: Dashboard now also aggregates live Current accounts (currentAccountIds/currentSnapshot) into the Dashboard grid, while keeping provider+account de-dupe. Verified: xcodebuild Release build OK (CODE_SIGNING_ALLOWED=NO). UsageFetcherTests OK. make up OK (Release build, installed to /Applications/Claude Island.app, relaunch).","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-06T11:25:20.119069+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T11:26:08.266243+09:00","closed_at":"2026-02-06T11:26:08.266243+09:00","close_reason":"Event recorded","dependencies":[{"issue_id":"agent-island-5y0.1","depends_on_id":"agent-island-5y0","type":"parent-child","created_at":"2026-02-06T11:25:20.11973+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-6pq","title":"Usage dashboard: show account id and separate auth-expired errors","description":"1) Display provider accountId next to the provider header (to the right of the icon). Persist last-known accountId so it still shows on errors. 2) In Dashboard grid, move tiles with auth-expired errors to the bottom under a separator.","acceptance_criteria":"Provider columns show accountId (best-effort, truncates) and it stays visible on error. Dashboard grid groups auth-expired tiles under a separator at the bottom. Build + make up succeed.","status":"closed","priority":1,"issue_type":"feature","owner":"icedac@gmail.com","created_at":"2026-02-06T11:36:05.642704+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T11:42:52.521234+09:00","closed_at":"2026-02-06T11:42:52.521234+09:00","close_reason":"Evidence: xcodebuild Release build OK (CODE_SIGNING_ALLOWED=NO). make up OK (Release build, installed to /Applications/Claude Island.app, relaunch). Feature: provider columns now show accountId next to the provider icon; Current accountIds are cached so they still render on errors. Dashboard grid moves tiles with expired auth (tokenRefresh expired + error) to the bottom under a separator.","labels":["phase:review"]}
{"id":"agent-island-6pq.1","title":"State change: phase → review","description":"Set phase to review\n\nReason: Added accountId display in provider header and cached last-known Current accountIds so IDs stay visible during errors. Dashboard grid now groups auth-expired error tiles at the bottom under a separator. Verified: xcodebuild Release build OK (CODE_SIGNING_ALLOWED=NO). make up OK (Release build, installed to /Applications/Claude Island.app, relaunch).","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-06T11:42:44.354711+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T11:43:42.757362+09:00","closed_at":"2026-02-06T11:43:42.757362+09:00","close_reason":"Event recorded","dependencies":[{"issue_id":"agent-island-6pq.1","depends_on_id":"agent-island-6pq","type":"parent-child","created_at":"2026-02-06T11:42:44.355353+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-6vq","title":"Usage: Friendly Claude Account IDs + Identity Plan Field","description":"Problem\n- UI/toasts show hashed Claude account IDs like acct_claude_\u003chash\u003e.\n- Identity cache (usage-identities.json) needs a user-editable plan field.\n\nGoal\n- Display friendly Claude account IDs derived from email, with TEAM disambiguation:\n  - acct_claude_\u003cemail-slug\u003e\n  - acct_claude_team_\u003cemail-slug\u003e\n- Extend identity cache schema to include plan (default null) and load it on startup.\n- Prefer plan from identity cache for Claude tier badge when present.\n\nAcceptance\n- Claude Code token sheet + action messages use friendly account IDs (not hash).\n- ~/.claude-island/usage-identities.json entries include \"plan\": null when written.\n- If plan is set in that file, Claude tier badge reflects it.\n- xcodebuild Release + make up succeed.","status":"closed","priority":1,"issue_type":"task","owner":"icedac@gmail.com","estimated_minutes":45,"created_at":"2026-02-06T16:53:55.781793+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T17:15:13.985725+09:00","closed_at":"2026-02-06T17:15:13.985725+09:00","close_reason":"Implemented friendly Claude account IDs (acct_claude[_team]_email_slug) for Claude Code token UI + action messages. Added Identity.plan field (encoded as null) in ~/.agent-island/usage-identities.json and prefer it as Claude tier override when set. Verified: xcodebuild Release build succeeded; make up succeeded.","labels":["phase:review"]}
{"id":"agent-island-6vq.1","title":"State change: phase → review","description":"Set phase to review\n\nReason: Added user-editable Identity.plan (encoded as null) and loaded plan override for Claude tier. Updated Claude Code token UI/toasts to show friendly acct_claude[_team]_email_slug IDs. Verified: xcodebuild Release build + make up.","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-06T17:14:38.39358+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T17:15:23.922806+09:00","closed_at":"2026-02-06T17:15:23.922806+09:00","close_reason":"Event recorded","dependencies":[{"issue_id":"agent-island-6vq.1","depends_on_id":"agent-island-6vq","type":"parent-child","created_at":"2026-02-06T17:14:38.398775+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-7s8","title":"Claude refresh: persist refreshed OAuth into macOS keychain","description":"Claude refresh currently writes updated OAuth token only to ~/.claude/.credentials.json, but runtime reads keychain first on macOS. This can revert to stale/revoked token on next run. Update vendored check-usage script to sync refreshed credentials to keychain service 'Claude Code-credentials' as well.","acceptance_criteria":"1) check-usage writes refreshed claudeAiOauth to file and keychain on macOS. 2) build succeeds. 3) refresh diagnostic logs include keychain save success/failure.","status":"closed","priority":1,"issue_type":"bug","owner":"icedac@gmail.com","created_at":"2026-02-09T18:36:27.592512+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-09T18:36:59.652255+09:00","closed_at":"2026-02-09T18:36:59.652255+09:00","close_reason":"check-usage now writes refreshed Claude OAuth to both file and keychain on macOS, preventing stale keychain token reuse on next run; diagnostics added for keychain save path. Validation: node --check passed, xcodebuild Release passed, make up (install+relaunch) passed.","labels":["phase:review"]}
{"id":"agent-island-7s8.1","title":"State change: phase → review","description":"Set phase to review\n\nReason: Updated check-usage.js to persist refreshed Claude OAuth credentials to macOS keychain (service: Claude Code-credentials) in addition to ~/.claude/.credentials.json; added keychain account discovery + merge save + debug logs. Verified: node --check OK, xcodebuild Release OK, make up OK.","status":"open","priority":4,"issue_type":"event","created_at":"2026-02-09T18:36:55.337843+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-09T18:36:55.337843+09:00","dependencies":[{"issue_id":"agent-island-7s8.1","depends_on_id":"agent-island-7s8","type":"parent-child","created_at":"2026-02-09T18:36:55.338546+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-7tq","title":"Usage UI: provider icons (Claude/Codex/Gemini) with equal sizing","description":"Goal\n- Replace provider name text (Claude/Codex/Gemini) with the provided icons.\n- Icons must render at the same size everywhere they appear in Usage UI.\n\nAcceptance\n- Usage dashboard provider headers show icon instead of provider name text\n- Reset alerts list rows show icon instead of provider name text\n- Icons are bundled in the app (no dependency on repo-local paths)\n- Build + make up succeed\n\nAssets\n- claude.svg\n- codex.svg\n- gemini.png","status":"closed","priority":1,"issue_type":"feature","owner":"icedac@gmail.com","created_at":"2026-02-06T09:05:24.852725+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T09:13:06.774826+09:00","closed_at":"2026-02-06T09:13:06.774826+09:00","close_reason":"Usage UI now uses provider icons (claude.svg/codex.svg/gemini.png) instead of provider name text, with a fixed 14pt frame so all providers render the same size. Assets are bundled in the app (Xcode fileSystemSynchronizedGroup for assets/ + Bundle URL loading). Verified: xcodebuild Release + Debug succeeded; make up succeeded (Release build + install to /Applications + relaunch).","labels":["phase:review"]}
{"id":"agent-island-7tq.1","title":"State change: phase → review","description":"Set phase to review\n\nReason: Replace provider header text with bundled provider icons (claude.svg/codex.svg/gemini.png) rendered at equal size; icons loaded from app bundle via NSImage. Verified: xcodebuild Release + Debug succeeded; make up succeeded (install + relaunch).","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-06T09:13:00.924506+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T09:13:15.529408+09:00","closed_at":"2026-02-06T09:13:15.529408+09:00","close_reason":"State-change event recorded; no further action.","dependencies":[{"issue_id":"agent-island-7tq.1","depends_on_id":"agent-island-7tq","type":"parent-child","created_at":"2026-02-06T09:13:00.925095+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-87e","title":"Usage: fix duplicate tile IDs and add Claude refresh diagnostics","description":"Fix dashboard tile ID collisions causing SwiftUI undefined behavior (duplicate id claude:acct_*). Add Claude refresh debug logs in vendored check-usage script to trace refresh attempts/status/save without exposing tokens.","acceptance_criteria":"1) Dashboard no longer emits duplicate ID warnings for UsageAccountTileGrid. 2) check-usage DEBUG logs include Claude refresh decision + HTTP status + save result. 3) xcodebuild Release build succeeds.","status":"closed","priority":1,"issue_type":"bug","owner":"icedac@gmail.com","created_at":"2026-02-09T18:20:06.059418+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-09T18:23:20.162055+09:00","closed_at":"2026-02-09T18:23:20.162055+09:00","close_reason":"xcodebuild Release succeeded; make up succeeded (build+install+relaunch); app log no duplicate IndexedTile ID warnings in last 10m; Docker DEBUG run on 2h Claude account shows refresh path executed and failed with 400 invalid_grant, followed by usage 403 revoked; 3 files changed, +75/-12.","labels":["phase:review"]}
{"id":"agent-island-87e.1","title":"State change: phase → review","description":"Set phase to review\n\nReason: Fixed duplicate dashboard tile IDs and added Claude refresh diagnostics. Verification: xcodebuild Release build passed; make up passed and relaunched app; log check shows no duplicate IndexedTile ID warnings in last 10m; debug run for 2h account shows refresh attempted then invalid_grant (server-side) and 403 revoked.","status":"open","priority":4,"issue_type":"event","created_at":"2026-02-09T18:23:16.22361+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-09T18:23:16.22361+09:00","dependencies":[{"issue_id":"agent-island-87e.1","depends_on_id":"agent-island-87e","type":"parent-child","created_at":"2026-02-09T18:23:16.224729+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-894","title":"Usage: show email in provider header","description":"Provider column header should show email (primary), with tier badge on the right; remove the separate email row.","acceptance_criteria":"Header shows email next to provider icon; tier badge remains on the right; token-expiry row follows immediately; fallback to accountId when email is unavailable.","status":"closed","priority":1,"issue_type":"feature","owner":"icedac@gmail.com","created_at":"2026-02-06T14:54:09.28851+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T14:54:30.583815+09:00","closed_at":"2026-02-06T14:54:30.583815+09:00","close_reason":"Provider column now shows email in the header (next to icon) with tier badge on the right; removed redundant email row; falls back to accountId when email is missing. Verified: xcodebuild Release build succeeded; make up succeeded (installs to /Applications + relaunch).","labels":["phase:review"]}
{"id":"agent-island-894.1","title":"State change: phase → review","description":"Set phase to review\n\nReason: Moved provider email into the header (icon + email + tier badge) and removed the separate email row; fallback to accountId when email is unavailable. Verified: xcodebuild Release build succeeded; make up succeeded (install + relaunch).","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-06T14:54:26.301967+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T14:54:39.841526+09:00","closed_at":"2026-02-06T14:54:39.841526+09:00","close_reason":"State-change event recorded; no further action.","dependencies":[{"issue_id":"agent-island-894.1","depends_on_id":"agent-island-894","type":"parent-child","created_at":"2026-02-06T14:54:26.302642+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-8dt","title":"Claude token refresh threshold: trigger when \u003c 7 hours","description":"Update Claude pre-refresh threshold from 5 minutes to 7 hours so pressing Refresh proactively rotates access token earlier. Validate with isolated HOME + mock token endpoint to prove threshold behavior: 8h left =\u003e no refresh; 6h left =\u003e refresh invoked.","acceptance_criteria":"1) CLAUDE_TOKEN_REFRESH_BUFFER_MS is 7h in check-usage.js. 2) Threshold proof shows 8h left =\u003e 0 refresh calls, 6h left =\u003e refresh calls \u003e0. 3) Release build succeeds.","status":"closed","priority":1,"issue_type":"task","owner":"icedac@gmail.com","created_at":"2026-02-09T18:04:17.153233+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-09T18:04:42.361711+09:00","closed_at":"2026-02-09T18:04:42.361711+09:00","close_reason":"Updated check-usage.js refresh buffer to 7h; threshold proof with isolated HOME+mock token server: 8h left =\u003e 0 refresh calls, 6h left =\u003e refresh calls; xcodebuild Release build OK.","labels":["phase:review"]}
{"id":"agent-island-8dt.1","title":"State change: phase → review","description":"Set phase to review\n\nReason: Changed CLAUDE_TOKEN_REFRESH_BUFFER_MS to 7h. Proof: mock token endpoint test shows 8h-left case made 0 refresh calls, 6h-left case made refresh calls. Release build succeeded.","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-09T18:04:37.219351+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-09T18:04:47.83168+09:00","closed_at":"2026-02-09T18:04:47.83168+09:00","close_reason":"Event recorded","dependencies":[{"issue_id":"agent-island-8dt.1","depends_on_id":"agent-island-8dt","type":"parent-child","created_at":"2026-02-09T18:04:37.220049+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-8tg","title":"Usage: hide Claude plan badge when unknown","description":"If Claude subscription tier can't be determined, the UI should not display any tier badge (avoid showing arbitrary/unknown strings).","acceptance_criteria":"Claude tier badge only appears for Pro/Max5/Max20; otherwise no tier badge is shown. Builds succeed + make up installs.","status":"closed","priority":1,"issue_type":"bug","owner":"icedac@gmail.com","created_at":"2026-02-06T11:31:40.205822+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T11:33:08.706489+09:00","closed_at":"2026-02-06T11:33:08.706489+09:00","close_reason":"Evidence: xcodebuild Release build OK (CODE_SIGNING_ALLOWED=NO). UsageFetcherTests OK. make up OK (Release build, installed to /Applications/Claude Island.app, relaunch). UI: Claude tier badge is now hidden unless tier is recognized (Pro/Max5/Max20).","labels":["phase:review"]}
{"id":"agent-island-8tg.1","title":"State change: phase → review","description":"Set phase to review\n\nReason: Hide Claude tier badge when tier cannot be classified (only show Pro/Max5/Max20). Verified: xcodebuild Release build OK (CODE_SIGNING_ALLOWED=NO). UsageFetcherTests OK. make up OK (Release build, installed to /Applications/Claude Island.app, relaunch).","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-06T11:33:02.658902+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T11:33:49.308557+09:00","closed_at":"2026-02-06T11:33:49.308557+09:00","close_reason":"Event recorded","dependencies":[{"issue_id":"agent-island-8tg.1","depends_on_id":"agent-island-8tg","type":"parent-child","created_at":"2026-02-06T11:33:02.65956+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-9k4","title":"UI: Token refresh countdown bar + ignore .claude logs","description":"Goal\n- Show remaining time until auth token refresh/expiry as a small bar in each provider card.\n- Ignore local Claude/Codex chat logs directories in git.\n\nAcceptance\n- Each provider card shows an extra row like: tok [bar] \u003ctime remaining\u003e.\n- Uses credential expiry when available (Codex JWT exp/iat; Gemini expiry_date/expiresAt; Claude oauth expires fields if present).\n- .gitignore ignores `.claude/raw_logs/` and `.claude/chat_logs/`.\n- Builds succeed (Debug CODE_SIGNING_ALLOWED=NO + Release).\n","status":"closed","priority":1,"issue_type":"task","owner":"icedac@gmail.com","estimated_minutes":60,"created_at":"2026-02-06T01:37:49.591043+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T01:46:37.771474+09:00","closed_at":"2026-02-06T01:46:37.771474+09:00","close_reason":"Token refresh countdown bar (tok) added to each provider card; .gitignore ignores .claude/raw_logs + .claude/chat_logs; xcodebuild Debug (CODE_SIGNING_ALLOWED=NO) + Release succeeded; 4 files changed (+297/-14).","labels":["phase:review"]}
{"id":"agent-island-9k4.1","title":"State change: phase → review","description":"Set phase to review\n\nReason: Added token refresh countdown bar (tok) to usage cards; .gitignore now ignores .claude/raw_logs and .claude/chat_logs; verified xcodebuild Debug (CODE_SIGNING_ALLOWED=NO) + Release build.","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-06T01:46:32.903466+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T01:46:48.882208+09:00","closed_at":"2026-02-06T01:46:48.882208+09:00","close_reason":"State-change event recorded; no further action.","dependencies":[{"issue_id":"agent-island-9k4.1","depends_on_id":"agent-island-9k4","type":"parent-child","created_at":"2026-02-06T01:46:32.904561+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-9un","title":"Usage: make provider email more legible","description":"Provider header email is too dim; make it near-white so it reads at a glance.","acceptance_criteria":"When email is present, render it in near-white (high contrast) while keeping accountId fallback dim.","status":"closed","priority":1,"issue_type":"feature","owner":"icedac@gmail.com","created_at":"2026-02-06T16:04:49.363076+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T16:05:58.860831+09:00","closed_at":"2026-02-06T16:05:58.860831+09:00","close_reason":"Provider header email is now rendered near-white for legibility; accountId fallback remains dim. Verified: xcodebuild Release build succeeded; make up succeeded (installs to /Applications + relaunch).","labels":["phase:review"]}
{"id":"agent-island-9un.1","title":"State change: phase → review","description":"Set phase to review\n\nReason: Made provider header email high-contrast (near-white) while keeping accountId fallback dim. Verified: xcodebuild Release build succeeded; make up succeeded (install + relaunch).","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-06T16:05:54.760453+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T16:06:02.701565+09:00","closed_at":"2026-02-06T16:06:02.701565+09:00","close_reason":"State-change event recorded; no further action.","dependencies":[{"issue_id":"agent-island-9un.1","depends_on_id":"agent-island-9un","type":"parent-child","created_at":"2026-02-06T16:05:54.761093+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-ab5","title":"Usage tabs: hide Current when it matches a saved profile; mark matching profile as LIVE","description":"Goal\n- If Current credentials are identical to a saved profile, don't show the redundant Current tab.\n- Instead, show the matching profile tab with a LIVE marker.\n- If Current later diverges from all saved profiles, Current should reappear (LIVE).\n\nAcceptance\n- Tabs:\n  - Always show Dashboard (ALL)\n  - Show Current (LIVE) only when it does NOT match any saved profile\n  - If it matches Profile X, hide Current and show Profile X with LIVE marker\n- Selection stability:\n  - If user is on Current and it becomes hidden, automatically switch to the matching LIVE profile tab\n  - If selected profile disappears, fall back to Dashboard\n- Matching should be robust (use the same credential hash/account-id logic as ProfileSwitcher)\n\nNotes\n- Keep all UI strings in English\n- No text wrapping/regressions","status":"closed","priority":1,"issue_type":"feature","owner":"icedac@gmail.com","created_at":"2026-02-06T08:40:36.871522+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T08:51:14.809221+09:00","closed_at":"2026-02-06T08:51:14.809221+09:00","close_reason":"Tabs now hide redundant Current when it matches a saved profile and mark the matching profile as LIVE; matching uses the same credential hash/account-id logic as ProfileSwitcher; selection auto-moves to the live tab when live target changes. Verified: xcodebuild Release build succeeded; make up succeeded (Release build + install + relaunch).","labels":["phase:review"]}
{"id":"agent-island-ab5.1","title":"State change: phase → review","description":"Set phase to review\n\nReason: Hide redundant Current tab when it matches a saved profile; show matching profile as LIVE; robust matching via credential hash/account-id; verified xcodebuild Release build + make up.","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-06T08:51:05.391842+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T08:51:30.060863+09:00","closed_at":"2026-02-06T08:51:30.060863+09:00","close_reason":"State-change event recorded; no further action.","dependencies":[{"issue_id":"agent-island-ab5.1","depends_on_id":"agent-island-ab5","type":"parent-child","created_at":"2026-02-06T08:51:05.39246+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-aj3","title":"Usage dashboard: prettier compact cards + Gemini 24h window","description":"## Problem\\nThe Usage/Profiles cards were readable but cramped; reset times wrapped. Gemini window is effectively 24h (not 5h).\\n\\n## Expected\\n- Gemini shows 24h window label\\n- Usage window rows stay single-line (no wrapping)\\n- Bars look like a compact segmented meter (similar to [||||||-----])","status":"closed","priority":1,"issue_type":"chore","owner":"icedac@gmail.com","estimated_minutes":60,"created_at":"2026-02-06T01:04:59.850309+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T01:05:14.645443+09:00","closed_at":"2026-02-06T01:05:14.645443+09:00","close_reason":"Gemini now displays 24h window; usage rows stay single-line; segmented bars match compact [|||||-----] look; duration formatting improved. Verified xcodebuild Debug (CODE_SIGNING_ALLOWED=NO) + Release builds succeeded.","labels":["phase:review"]}
{"id":"agent-island-aj3.1","title":"State change: phase → review","description":"Set phase to review\n\nReason: Updated Usage cards: Gemini uses 24h label, window rows no longer wrap (no Spacer; trailing takes remaining width), segmented meter bar, improved duration formatting with zero-padded minutes. Verified xcodebuild Debug (CODE_SIGNING_ALLOWED=NO) + Release builds succeeded.","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-06T01:05:10.096829+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T01:05:18.171224+09:00","closed_at":"2026-02-06T01:05:18.171224+09:00","close_reason":"Event recorded","dependencies":[{"issue_id":"agent-island-aj3.1","depends_on_id":"agent-island-aj3","type":"parent-child","created_at":"2026-02-06T01:05:10.098033+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-as4","title":"Add regression tests for provider-email identity matching","description":"Expand UsageAccountIdentityMatcher tests to cover multi-provider mismatch and cross-provider identity-key separation.","status":"closed","priority":3,"issue_type":"task","owner":"icedac@gmail.com","created_at":"2026-02-09T12:56:54.719086+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-09T12:57:10.341579+09:00","closed_at":"2026-02-09T12:57:10.341579+09:00","close_reason":"Added regression coverage for multi-provider mismatch behavior and cross-provider identity-key separation in UsageAccountIdentityMatcher tests."}
{"id":"agent-island-atl","title":"Dashboard: Equalize Card Heights Per Row","description":"Problem\n- Dashboard tiles in a row have uneven heights when some accounts show extra badges/lines (e.g. EXPIRED/ERROR, TEAM, token timers).\n\nGoal\n- Within each dashboard grid row, all tiles should match the tallest tile in that row.\n- Apply independently for the main grid and the expired/error grid below the separator.\n\nAcceptance\n- For any row, tile backgrounds align to the same height (tallest in that row).\n- No layout jitter loops; heights settle after measurement.\n- Hover/selection visuals unchanged.\n- xcodebuild Release + make up succeed.","status":"closed","priority":1,"issue_type":"task","owner":"icedac@gmail.com","estimated_minutes":60,"created_at":"2026-02-06T16:30:19.379786+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T16:44:45.120217+09:00","closed_at":"2026-02-06T16:44:45.120217+09:00","close_reason":"Dashboard tiles now equalize height per row (tallest tile wins) for both main and expired grids via PreferenceKey measurement + forced frame heights. Verified: xcodebuild Release build succeeded; make up succeeded. Files: ClaudeIsland/UI/Views/UsageDashboardView.swift.","labels":["phase:review"]}
{"id":"agent-island-atl.1","title":"State change: phase → review","description":"Set phase to review\n\nReason: Implemented per-row equal-height tiles in dashboard grids (normal + expired grids). Verified: xcodebuild Release build succeeded; make up succeeded.","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-06T16:44:40.152889+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T16:44:53.671725+09:00","closed_at":"2026-02-06T16:44:53.671725+09:00","close_reason":"Event recorded","dependencies":[{"issue_id":"agent-island-atl.1","depends_on_id":"agent-island-atl","type":"parent-child","created_at":"2026-02-06T16:44:40.153526+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-big","title":"Usage: persist display identities + show EXPIRED badge","description":"1) When accounts error (e.g. auth expired), dashboard tiles fall back to accountId (acct_...). Persist last-known display email/tier/team per accountId and use it on failures so tiles still show the email.\\n\\n2) When tokenRefresh is expired, show a status badge 'EXPIRED' instead of 'ERR'. Use 'ERROR' for non-expiry errors.","acceptance_criteria":"- Persist last-known email (and Claude tier/team) per accountId under ~/.claude-island; load it on app start so error tiles still show email\\n- Provider badge shows EXPIRED when tokenRefresh.expiresAt \u003c= now\\n- Provider badge shows ERROR for other errors\\n- xcodebuild Release + make up succeed","status":"closed","priority":0,"issue_type":"feature","owner":"icedac@gmail.com","created_at":"2026-02-06T16:12:00.783443+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T16:18:55.960409+09:00","closed_at":"2026-02-06T16:18:55.960409+09:00","close_reason":"Implemented persistent display identity cache: store last-known email (+Claude tier/team) per accountId in ~/.claude-island/usage-identities.json and load it on startup so tiles keep showing email even when usage/auth fails. Updated status badges: show EXPIRED when tokenRefresh.expiresAt \u003c= now; show ERROR for other errors. Verified: xcodebuild Release build succeeded; make up succeeded (installs to /Applications + relaunch).","labels":["phase:review"]}
{"id":"agent-island-big.1","title":"State change: phase → review","description":"Set phase to review\n\nReason: Persist last-known display identities (email/tier/team) per accountId under ~/.claude-island/usage-identities.json and load on startup, so error tiles still show email instead of acct_*. Also show EXPIRED badge when tokenRefresh is past; show ERROR for non-expiry errors. Verified: xcodebuild Release build succeeded; make up succeeded (install + relaunch).","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-06T16:18:50.726815+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T16:19:07.2952+09:00","closed_at":"2026-02-06T16:19:07.2952+09:00","close_reason":"State-change event recorded; no further action.","dependencies":[{"issue_id":"agent-island-big.1","depends_on_id":"agent-island-big","type":"parent-child","created_at":"2026-02-06T16:18:50.727448+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-c7a","title":"Current Claude tile shows account ID instead of email after fresh login","description":"After logging into a new Claude account, the Current Claude dashboard tile can show acct_claude_* instead of the actual email. Root cause: UsageFetcher identity cache reused incomplete identities (nil email) for 1 hour, so transient Claude profile lookup failures were sticky across refreshes. Fix: do not reuse incomplete cached identities when credentials exist; retry identity resolution on next refresh. Also increase Claude profile API timeout from 5s to 10s.","acceptance_criteria":"1) If Claude profile lookup transiently fails once, subsequent refresh retries identity lookup instead of reusing nil email. 2) Current Claude tile displays email after successful lookup without waiting cache TTL. 3) Existing UsageFetcher/ProfileSwitcher tests and Release build pass.","status":"closed","priority":0,"issue_type":"bug","owner":"icedac@gmail.com","created_at":"2026-02-09T17:47:37.568937+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-09T17:47:58.756091+09:00","closed_at":"2026-02-09T17:47:58.756091+09:00","close_reason":"swiftc script tests passed (/tmp/usage-fetcher-test OK, /tmp/profile-switcher-test OK); xcodebuild Release build succeeded; fixed sticky nil-email cache reuse and increased Claude profile timeout 5s→10s.","labels":["phase:review"]}
{"id":"agent-island-c7a.1","title":"State change: phase → review","description":"Set phase to review\n\nReason: Implemented identity-cache reuse guard for incomplete identities and increased Claude profile timeout to 10s. Verified with script tests and Release build.","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-09T17:47:53.532027+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-09T17:48:11.301348+09:00","closed_at":"2026-02-09T17:48:11.301348+09:00","close_reason":"Event recorded","dependencies":[{"issue_id":"agent-island-c7a.1","depends_on_id":"agent-island-c7a","type":"parent-child","created_at":"2026-02-09T17:47:53.533223+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-cam","title":"Stabilize account IDs to avoid duplicate account records across token refresh","description":"Current account IDs are derived from credential file fingerprints, so token refresh/login churn can generate new account IDs for the same provider identity. This can grow accounts.json and require fallback matching. Add stable identity derivation/migration strategy for account IDs.","notes":"Implemented in-progress: UsageCredentialHasher now derives stable fingerprints from provider-stable identifiers (Claude refreshToken, Codex account_id, Gemini refresh token) before hashing, reducing account ID churn when access tokens rotate.","status":"closed","priority":1,"issue_type":"task","owner":"icedac@gmail.com","created_at":"2026-02-09T12:33:04.321583+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-09T15:59:36.558112+09:00","closed_at":"2026-02-09T15:59:36.558112+09:00","close_reason":"Stabilized account IDs by hashing provider-stable identifiers (Claude refreshToken, Codex account_id, Gemini refresh token) instead of volatile access-token snapshots; added deterministic tests in ProfileSwitcherTests and verified pass.","labels":["phase:review"],"dependencies":[{"issue_id":"agent-island-cam","depends_on_id":"agent-island-l4h","type":"parent-child","created_at":"2026-02-09T15:50:49.51361+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-cam.1","title":"State change: phase → review","description":"Set phase to review\n\nReason: Stable account-id derivation implemented and validated","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-09T15:59:16.347303+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-09T15:59:16.347303+09:00","closed_at":"2026-02-09T15:59:17.347303+09:00","dependencies":[{"issue_id":"agent-island-cam.1","depends_on_id":"agent-island-cam","type":"parent-child","created_at":"2026-02-09T15:59:16.348067+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-caq","title":"UI: Improve usage bars + English text","description":"Goal\\n- Improve Usage dashboard readability based on external review.\\n\\nWork\\n- Remove the confusing token refresh row (\"tok\").\\n- For Claude/Codex 5h + 7d rows: show dual progress bars (usage remaining + time-to-reset).\\n- Show tier as a colored badge in the provider header (not a separate row).\\n- Convert all UI strings on Usage screen + menu to English.\\n\\nNotes\\n- Usage bar color: green → red (based on remaining).\\n- Reset timer bar color: cool tone (blue).\\n- Tier badge colors: Claude Pro=white, Max5=orange, Max20=red; Codex Plus=white, Pro=red.","acceptance_criteria":"- No \"tok\" label/row in UI.\\n- Claude/Codex rows show 2 bars: usage + time-to-reset; both have numeric labels below.\\n- Tier badge colors match spec.\\n- All visible strings are English.\\n- xcodebuild Debug (CODE_SIGNING_ALLOWED=NO) + Release build succeed.","status":"closed","priority":0,"issue_type":"task","owner":"icedac@gmail.com","estimated_minutes":60,"created_at":"2026-02-06T03:12:41.303995+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T03:18:59.268589+09:00","closed_at":"2026-02-06T03:18:59.268589+09:00","close_reason":"Evidence: xcodebuild Debug OK (CODE_SIGNING_ALLOWED=NO) + Release OK. Script tests OK: UsageModelsTests, AccountStoreTests, CredentialExporterTests, UsageFetcherTests, ProfileSwitcherTests. UI updated: removed \"tok\" row; Claude/Codex 5h/7d show dual bars (usage + reset timer in blue) with numeric labels; tier badges use spec colors; all visible menu/usage strings are English.","labels":["phase:review"]}
{"id":"agent-island-caq.1","title":"State change: phase → review","description":"Set phase to review\n\nReason: Verified: xcodebuild Debug build OK (CODE_SIGNING_ALLOWED=NO) + xcodebuild Release build OK; script tests OK (UsageModels/AccountStore/CredentialExporter/UsageFetcher/ProfileSwitcher). Implemented dual bars (usage remaining + reset timer) and tier badges; removed \"tok\" row; converted menu + usage strings to English.","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-06T03:18:54.255505+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T03:19:04.742512+09:00","closed_at":"2026-02-06T03:19:04.742512+09:00","close_reason":"Event recorded","dependencies":[{"issue_id":"agent-island-caq.1","depends_on_id":"agent-island-caq","type":"parent-child","created_at":"2026-02-06T03:18:54.256095+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-cjz","title":"Usage UI: 4-letter badges + token refresh expired text","description":"Problem\n- Status badges like EXPIRED are long; user wants max 4-letter abbreviations.\n- Token refresh row shows \u003c1m even when the token is already expired.\n\nGoal\n- Badge abbreviations (max 4 letters):\n  - TEAM stays TEAM\n  - EXPIRED -\u003e EXP\n  - (Also shorten other status badges to \u003c=4 chars)\n- When token refresh is expired, show \"Expired!\" in the key row instead of a duration.\n\nAcceptance\n- Expired status badge displays as EXP\n- Token refresh row displays \"Expired!\" when expired\n- xcodebuild Release + make up succeed","status":"closed","priority":1,"issue_type":"task","owner":"icedac@gmail.com","estimated_minutes":20,"created_at":"2026-02-06T17:20:53.412371+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T17:22:24.905096+09:00","closed_at":"2026-02-06T17:22:24.905096+09:00","close_reason":"Usage status badges are now \u003c=4 chars (MISS/ERR/EXP; TEAM unchanged). Token refresh row shows 'Expired!' when tokenRefresh.expiresAt \u003c= now (instead of \u003c1m). Verified: xcodebuild Release succeeded; make up succeeded.","labels":["phase:review"]}
{"id":"agent-island-cjz.1","title":"State change: phase → review","description":"Set phase to review\n\nReason: Shortened status badges to \u003c=4 chars (TEAM unchanged, EXPIRED-\u003eEXP, MISSING-\u003eMISS, ERROR-\u003eERR) and token refresh row now shows 'Expired!' when expired instead of \u003c1m. Verified: xcodebuild Release + make up succeeded.","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-06T17:22:18.163195+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T17:22:34.894864+09:00","closed_at":"2026-02-06T17:22:34.894864+09:00","close_reason":"Event recorded","dependencies":[{"issue_id":"agent-island-cjz.1","depends_on_id":"agent-island-cjz","type":"parent-child","created_at":"2026-02-06T17:22:18.163853+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-dpk","title":"Usage dashboard: show Current snapshot when no profiles","description":"## Problem\\nProfiles/Usage screen shows 'No profiles yet' even when Claude/Codex/Gemini logins exist on this machine. This is confusing; users expect at least a 'current credentials' snapshot without needing to press Save Profile first.\\n\\n## Repro\\n1. Ensure local CLI logins exist (Claude/Codex/Gemini).\\n2. Open app → Usage/Profiles.\\n3. Observe empty state: 'No profiles yet'.\\n\\n## Expected\\nShow a 'Current (unsaved)' row (or similar) using current machine credentials, and allow Refresh to fetch usage, even if no saved profiles exist.\\n\\n## Notes\\nDocker-based usage scripts can't access macOS Keychain; we need to export creds into a temp HOME for the container run.","status":"closed","priority":0,"issue_type":"bug","owner":"icedac@gmail.com","estimated_minutes":120,"created_at":"2026-02-06T00:18:44.63453+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T00:30:37.993793+09:00","closed_at":"2026-02-06T00:30:37.993793+09:00","close_reason":"Fix: Usage/Profiles shows a 'Current (unsaved)' row and fetches usage from live CLI creds (exported to temp HOME for docker). Verified: xcodebuild Debug build (CODE_SIGNING_ALLOWED=NO) succeeded; xcodebuild Release build (codesigned) succeeded.","labels":["phase:review"]}
{"id":"agent-island-dpk.1","title":"State change: phase → review","description":"Set phase to review\n\nReason: Show Current (unsaved) usage row using live CLI creds exported into temp HOME for docker usage script; xcodebuild Debug+Release build succeeded.","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-06T00:30:29.576018+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T00:31:05.936469+09:00","closed_at":"2026-02-06T00:31:05.936469+09:00","close_reason":"Event recorded","dependencies":[{"issue_id":"agent-island-dpk.1","depends_on_id":"agent-island-dpk","type":"parent-child","created_at":"2026-02-06T00:30:29.576759+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-drn","title":"Usage profiles and subscription dashboard","description":"Spec: docs/usage-profiles.spec.md","status":"closed","priority":0,"issue_type":"epic","owner":"icedac@gmail.com","created_at":"2026-02-05T16:45:40.896376+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-05T19:17:45.658668+09:00","closed_at":"2026-02-05T19:17:45.658668+09:00","close_reason":"Epic complete: usage dashboard default view + profile save/switch + docker-based usage fetcher shipped. Verified xcodebuild Debug build OK (CODE_SIGNING_ALLOWED=NO) and script smoke tests OK.","labels":["phase:review"],"comments":[{"id":1,"issue_id":"agent-island-drn","author":"Zhuge Hyuk","text":"Note: work was rebased after close; final commits on branch usage-profiles: ab477a7 (docker usage fetcher), 50e918e (usage dashboard UI), 2ccf0ab (profile save/switch), 2246c22 (stage usage script + docker context retry), b6ad0b3 (Mixpanel safe wrapper).","created_at":"2026-02-05T10:21:10Z"},{"id":6,"issue_id":"agent-island-drn","author":"Zhuge Hyuk","text":"Update: GitHub push protection flagged hard-coded Google OAuth client id/secret in vendored check-usage.js; sanitized to env-based GEMINI_OAUTH_CLIENT_ID/GEMINI_OAUTH_CLIENT_SECRET (refresh skipped if unset) and rewrote branch history. Final commits on origin/usage-profiles: d4c1a1d (docker usage fetcher + sanitized script), b2d0c77 (usage dashboard UI), f604796 (profile save/switch), df02abe (script staging + docker context retry), 5cba643 (Mixpanel safe wrapper).","created_at":"2026-02-05T10:29:26Z"}]}
{"id":"agent-island-drn.1","title":"Add usage models and parsing","description":"Add usage JSON models and parser helpers.","acceptance_criteria":"Models decode check-usage JSON.","status":"closed","priority":0,"issue_type":"task","owner":"icedac@gmail.com","estimated_minutes":60,"created_at":"2026-02-05T16:45:46.621179+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-05T16:52:26.857947+09:00","closed_at":"2026-02-05T16:52:26.857947+09:00","close_reason":"Closed","dependencies":[{"issue_id":"agent-island-drn.1","depends_on_id":"agent-island-drn","type":"parent-child","created_at":"2026-02-05T16:45:46.621801+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-drn.2","title":"Implement account and profile store","description":"Persist accounts and profiles in accounts.json.","acceptance_criteria":"Profiles load and save with shared accounts.","status":"closed","priority":0,"issue_type":"task","owner":"icedac@gmail.com","estimated_minutes":60,"created_at":"2026-02-05T16:45:50.619223+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-05T16:52:31.180606+09:00","closed_at":"2026-02-05T16:52:31.180606+09:00","close_reason":"Closed","dependencies":[{"issue_id":"agent-island-drn.2","depends_on_id":"agent-island-drn","type":"parent-child","created_at":"2026-02-05T16:45:50.619839+09:00","created_by":"Zhuge Hyuk"},{"issue_id":"agent-island-drn.2","depends_on_id":"agent-island-drn.1","type":"blocks","created_at":"2026-02-05T16:46:18.314975+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-drn.3","title":"Add credential exporter","description":"Export current Claude/Codex/Gemini credentials into account roots.","acceptance_criteria":"Account roots contain service credential files.","status":"closed","priority":0,"issue_type":"task","owner":"icedac@gmail.com","estimated_minutes":60,"created_at":"2026-02-05T16:45:54.167974+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-05T16:52:36.821051+09:00","closed_at":"2026-02-05T16:52:36.821051+09:00","close_reason":"Closed","dependencies":[{"issue_id":"agent-island-drn.3","depends_on_id":"agent-island-drn","type":"parent-child","created_at":"2026-02-05T16:45:54.168547+09:00","created_by":"Zhuge Hyuk"},{"issue_id":"agent-island-drn.3","depends_on_id":"agent-island-drn.2","type":"blocks","created_at":"2026-02-05T16:46:21.519253+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-drn.4","title":"Add docker usage fetcher","description":"Implement UsageFetcher + UsageCache in ClaudeIsland/Services/Usage, bundle ClaudeIsland/Resources/UsageScripts/check-usage.js, build temp HOME from account roots, run docker node:20-alpine check-usage.js --json, parse CheckUsageOutput, cache ~60s, surface errors.","acceptance_criteria":"check-usage JSON parsed into usage snapshots.","status":"closed","priority":0,"issue_type":"task","owner":"icedac@gmail.com","estimated_minutes":90,"created_at":"2026-02-05T16:45:59.148264+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-05T19:16:55.510234+09:00","closed_at":"2026-02-05T19:16:55.510234+09:00","close_reason":"Implemented UsageFetcher/UsageCache + vendored check-usage.js (cf476ef) + staging+docker-context retry fix (0ec67c7). Verified: xcodebuild Debug build OK (CODE_SIGNING_ALLOWED=NO), swiftc scripts/UsageFetcherTests.swift OK.","labels":["phase:review"],"dependencies":[{"issue_id":"agent-island-drn.4","depends_on_id":"agent-island-drn","type":"parent-child","created_at":"2026-02-05T16:45:59.14882+09:00","created_by":"Zhuge Hyuk"},{"issue_id":"agent-island-drn.4","depends_on_id":"agent-island-drn.1","type":"blocks","created_at":"2026-02-05T16:46:25.760698+09:00","created_by":"Zhuge Hyuk"},{"issue_id":"agent-island-drn.4","depends_on_id":"agent-island-drn.2","type":"blocks","created_at":"2026-02-05T16:46:28.612391+09:00","created_by":"Zhuge Hyuk"}],"comments":[{"id":2,"issue_id":"agent-island-drn.4","author":"Zhuge Hyuk","text":"Note: rebased after close. Final commits on usage-profiles: ab477a7 (initial UsageFetcher/UsageCache + vendored script), 2246c22 (stage script into temp HOME + retry desktop-linux docker context).","created_at":"2026-02-05T10:21:18Z"},{"id":7,"issue_id":"agent-island-drn.4","author":"Zhuge Hyuk","text":"Update: final commits on origin/usage-profiles after secret-sanitizing rewrite: d4c1a1d (UsageFetcher/UsageCache + vendored script, with Gemini refresh client id/secret removed), df02abe (stage script into temp HOME + retry desktop-linux docker context).","created_at":"2026-02-05T10:29:31Z"}]}
{"id":"agent-island-drn.4.1","title":"State change: phase → review","description":"Set phase to review\n\nReason: UsageFetcher/UsageCache implemented; xcodebuild Debug build OK (CODE_SIGNING_ALLOWED=NO); swiftc scripts/UsageFetcherTests.swift OK; docker run stages check-usage.js into temp HOME and retries desktop-linux context on MODULE_NOT_FOUND.","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-05T19:16:46.715597+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-05T19:16:46.715597+09:00","closed_at":"2026-02-05T19:16:47.715597+09:00","dependencies":[{"issue_id":"agent-island-drn.4.1","depends_on_id":"agent-island-drn.4","type":"parent-child","created_at":"2026-02-05T19:16:46.716209+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-drn.5","title":"Build usage dashboard UI","description":"Add UsageDashboardView + navigation: introduce NotchContentType.usage default, wire NotchView switch, add menu rows for 구독 사용량 and 클로드 세션 리스트, add sessions preview that links to instances list.","acceptance_criteria":"Usage screen is default and menu links work.","status":"closed","priority":0,"issue_type":"task","owner":"icedac@gmail.com","estimated_minutes":120,"created_at":"2026-02-05T16:46:02.817688+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-05T19:17:05.463255+09:00","closed_at":"2026-02-05T19:17:05.463255+09:00","close_reason":"Added UsageDashboardView + notch/menu navigation (4aaa79e). Verified: xcodebuild Debug build OK (CODE_SIGNING_ALLOWED=NO).","labels":["phase:review"],"dependencies":[{"issue_id":"agent-island-drn.5","depends_on_id":"agent-island-drn","type":"parent-child","created_at":"2026-02-05T16:46:02.818235+09:00","created_by":"Zhuge Hyuk"},{"issue_id":"agent-island-drn.5","depends_on_id":"agent-island-drn.4","type":"blocks","created_at":"2026-02-05T16:46:32.815277+09:00","created_by":"Zhuge Hyuk"}],"comments":[{"id":3,"issue_id":"agent-island-drn.5","author":"Zhuge Hyuk","text":"Note: rebased after close. Final commit on usage-profiles: 50e918e.","created_at":"2026-02-05T10:21:22Z"},{"id":8,"issue_id":"agent-island-drn.5","author":"Zhuge Hyuk","text":"Update: final commit on origin/usage-profiles after rewrite: b2d0c77.","created_at":"2026-02-05T10:29:36Z"}]}
{"id":"agent-island-drn.5.1","title":"State change: phase → review","description":"Set phase to review\n\nReason: UsageDashboardView + Notch navigation/menu wired (default contentType .usage). Verified compile via xcodebuild Debug build OK (CODE_SIGNING_ALLOWED=NO).","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-05T19:16:59.824361+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-05T19:16:59.824361+09:00","closed_at":"2026-02-05T19:17:00.824361+09:00","dependencies":[{"issue_id":"agent-island-drn.5.1","depends_on_id":"agent-island-drn.5","type":"parent-child","created_at":"2026-02-05T19:16:59.825084+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-drn.6","title":"Profile save and experimental switch","description":"Implement ProfileSwitcher using AccountStore/ProfileStore/CredentialExporter: save profile links to accounts.json, export current credentials into account roots, add experimental switch to copy credentials back into ~/.claude ~/.codex ~/.gemini with confirmation.","acceptance_criteria":"Profile save works; switch is best-effort.","status":"closed","priority":1,"issue_type":"task","owner":"icedac@gmail.com","estimated_minutes":90,"created_at":"2026-02-05T16:46:07.435868+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-05T19:17:15.419009+09:00","closed_at":"2026-02-05T19:17:15.419009+09:00","close_reason":"Profile save + experimental switch implemented (6c7f94a). Verified: swiftc scripts/ProfileSwitcherTests.swift OK; xcodebuild Debug build OK (CODE_SIGNING_ALLOWED=NO).","labels":["phase:review"],"dependencies":[{"issue_id":"agent-island-drn.6","depends_on_id":"agent-island-drn","type":"parent-child","created_at":"2026-02-05T16:46:07.436443+09:00","created_by":"Zhuge Hyuk"},{"issue_id":"agent-island-drn.6","depends_on_id":"agent-island-drn.2","type":"blocks","created_at":"2026-02-05T16:46:35.966461+09:00","created_by":"Zhuge Hyuk"},{"issue_id":"agent-island-drn.6","depends_on_id":"agent-island-drn.3","type":"blocks","created_at":"2026-02-05T16:46:40.647628+09:00","created_by":"Zhuge Hyuk"}],"comments":[{"id":4,"issue_id":"agent-island-drn.6","author":"Zhuge Hyuk","text":"Note: rebased after close. Final commit on usage-profiles: 2ccf0ab.","created_at":"2026-02-05T10:21:26Z"},{"id":9,"issue_id":"agent-island-drn.6","author":"Zhuge Hyuk","text":"Update: final commit on origin/usage-profiles after rewrite: f604796.","created_at":"2026-02-05T10:29:41Z"}]}
{"id":"agent-island-drn.6.1","title":"State change: phase → review","description":"Set phase to review\n\nReason: Implemented ProfileSwitcher save+switch flows + UI wiring (6c7f94a). Verified: swiftc scripts/ProfileSwitcherTests.swift OK; xcodebuild Debug build OK (CODE_SIGNING_ALLOWED=NO).","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-05T19:17:10.94996+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-05T19:17:10.94996+09:00","closed_at":"2026-02-05T19:17:11.94996+09:00","dependencies":[{"issue_id":"agent-island-drn.6.1","depends_on_id":"agent-island-drn.6","type":"parent-child","created_at":"2026-02-05T19:17:10.950694+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-drn.7","title":"Verification smoke checks","description":"Run xcodebuild Debug build and manual smoke checks for usage dashboard default view, navigation, docker usage fetch, profile save and switch; record results before closing.","acceptance_criteria":"Usage fetch and navigation validated.","status":"closed","priority":1,"issue_type":"task","owner":"icedac@gmail.com","estimated_minutes":45,"created_at":"2026-02-05T16:46:11.038618+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-05T19:17:29.811212+09:00","closed_at":"2026-02-05T19:17:29.811212+09:00","close_reason":"Smoke checks complete: xcodebuild Debug build OK (CODE_SIGNING_ALLOWED=NO). Script tests OK: UsageModelsTests, AccountStoreTests, CredentialExporterTests, UsageFetcherTests, ProfileSwitcherTests. Single-instance early-terminate no longer triggers Mixpanel mainInstance assertion (ec72408).","labels":["phase:review"],"dependencies":[{"issue_id":"agent-island-drn.7","depends_on_id":"agent-island-drn","type":"parent-child","created_at":"2026-02-05T16:46:11.039219+09:00","created_by":"Zhuge Hyuk"},{"issue_id":"agent-island-drn.7","depends_on_id":"agent-island-drn.5","type":"blocks","created_at":"2026-02-05T16:46:43.556158+09:00","created_by":"Zhuge Hyuk"},{"issue_id":"agent-island-drn.7","depends_on_id":"agent-island-drn.6","type":"blocks","created_at":"2026-02-05T16:46:46.987789+09:00","created_by":"Zhuge Hyuk"}],"comments":[{"id":5,"issue_id":"agent-island-drn.7","author":"Zhuge Hyuk","text":"Note: rebased after close. Mixpanel safe wrapper commit: b6ad0b3.","created_at":"2026-02-05T10:21:30Z"},{"id":10,"issue_id":"agent-island-drn.7","author":"Zhuge Hyuk","text":"Update: final verification/Mixpanel safety commit on origin/usage-profiles after rewrite: 5cba643.","created_at":"2026-02-05T10:29:46Z"}]}
{"id":"agent-island-drn.7.1","title":"State change: phase → review","description":"Set phase to review\n\nReason: Verification: xcodebuild Debug build OK (CODE_SIGNING_ALLOWED=NO); swiftc scripts/*Tests.swift (UsageModels/AccountStore/CredentialExporter/UsageFetcher/ProfileSwitcher) all OK; launched Debug app while Release instance running to validate single-instance termination path (no Mixpanel assertion after ec72408).","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-05T19:17:24.863087+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-05T19:17:24.863087+09:00","closed_at":"2026-02-05T19:17:25.863087+09:00","dependencies":[{"issue_id":"agent-island-drn.7.1","depends_on_id":"agent-island-drn.7","type":"parent-child","created_at":"2026-02-05T19:17:24.86374+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-drn.8","title":"State change: phase → review","description":"Set phase to review\n\nReason: All child tasks (.1-.7) completed; xcodebuild Debug build OK (CODE_SIGNING_ALLOWED=NO); script smoke tests OK; usage dashboard + profiles + docker fetcher implemented on usage-profiles branch.","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-05T19:17:39.983758+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-05T19:17:39.983758+09:00","closed_at":"2026-02-05T19:17:40.983758+09:00","dependencies":[{"issue_id":"agent-island-drn.8","depends_on_id":"agent-island-drn","type":"parent-child","created_at":"2026-02-05T19:17:39.984436+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-e5l","title":"Usage: dashboard grid for all accounts","description":"Goal\\n- On the Usage screen, make the default view a grid dashboard that shows usage for every saved account (not one profile at a time).\\n\\nBehavior\\n- Group by provider and render in this order: Claude, then Codex, then Gemini.\\n- Grid layout example (3 columns):\\n  - If Claude 4, Codex 2, Gemini 2:\\n    Claude1 Claude2 Claude3\\n    Claude4 Codex1  Codex2\\n    Gemini1 Gemini2\\n\\nAcceptance\\n- Usage screen default shows the full dashboard grid for all accounts.\\n- Uses existing usage fetching/caching; refresh button + auto refresh should refresh all tiles.\\n- Builds succeed (Debug CODE_SIGNING_ALLOWED=NO + Release).","acceptance_criteria":"- Verified xcodebuild Debug (CODE_SIGNING_ALLOWED=NO) + Release succeed.","status":"closed","priority":0,"issue_type":"task","owner":"icedac@gmail.com","estimated_minutes":90,"created_at":"2026-02-06T03:39:38.381342+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T03:47:43.290184+09:00","closed_at":"2026-02-06T03:47:43.290184+09:00","close_reason":"Evidence: xcodebuild Debug OK (CODE_SIGNING_ALLOWED=NO) + Release OK; script tests OK: UsageModelsTests, AccountStoreTests, CredentialExporterTests, UsageFetcherTests, ProfileSwitcherTests. Usage screen default now shows a Dashboard grid of all saved accounts, rendered in provider order (Claude, Codex, Gemini) in a 3-column layout.","labels":["phase:review"]}
{"id":"agent-island-e5l.1","title":"State change: phase → review","description":"Set phase to review\n\nReason: Verified: xcodebuild Debug build OK (CODE_SIGNING_ALLOWED=NO) + Release build OK; script tests OK (UsageModels/AccountStore/CredentialExporter/UsageFetcher/ProfileSwitcher). Added default Dashboard tab that shows all saved accounts in a 3-column grid ordered Claude→Codex→Gemini.","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-06T03:47:36.876942+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T03:47:48.722524+09:00","closed_at":"2026-02-06T03:47:48.722524+09:00","close_reason":"Event recorded","dependencies":[{"issue_id":"agent-island-e5l.1","depends_on_id":"agent-island-e5l","type":"parent-child","created_at":"2026-02-06T03:47:36.878475+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-e95","title":"UI: Show subscription tiers","description":"Goal\n- Display subscription tier for each provider in Usage dashboard.\n\nAcceptance\n- Claude shows tier: Pro | Max 5x | Max 20x (best-effort detection from OAuth profile).\n- Codex shows tier: Plus | Pro (from usage output planType).\n- Gemini shows a tier label inferred from model (e.g., Pro for gemini-3-pro-preview).\n- Builds succeed (Debug CODE_SIGNING_ALLOWED=NO + Release).\n","status":"closed","priority":1,"issue_type":"task","owner":"icedac@gmail.com","estimated_minutes":60,"created_at":"2026-02-06T02:11:40.691326+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T02:28:43.297187+09:00","closed_at":"2026-02-06T02:28:43.297187+09:00","close_reason":"Evidence: xcodebuild Debug build OK (CODE_SIGNING_ALLOWED=NO) + Release build OK (codesign). Script tests OK: UsageModelsTests, AccountStoreTests, CredentialExporterTests, UsageFetcherTests, ProfileSwitcherTests. Implemented provider tier display (Claude Pro/Max 5x/Max 20x; Codex Plus/Pro; Gemini inferred from model).","labels":["phase:review"]}
{"id":"agent-island-e95.1","title":"State change: phase → review","description":"Set phase to review\n\nReason: Verified: xcodebuild Debug (CODE_SIGNING_ALLOWED=NO) OK + xcodebuild Release OK; script tests OK (UsageModels/AccountStore/CredentialExporter/UsageFetcher/ProfileSwitcher). Implemented tier display in Usage dashboard (Claude tier via OAuth profile; Codex via plan; Gemini inferred from model).","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-06T02:28:34.453231+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T02:28:52.309799+09:00","closed_at":"2026-02-06T02:28:52.309799+09:00","close_reason":"Event recorded","dependencies":[{"issue_id":"agent-island-e95.1","depends_on_id":"agent-island-e95","type":"parent-child","created_at":"2026-02-06T02:28:34.453909+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-kh1","title":"Usage: colorize duration units and add spaces","description":"Update remaining-time strings to format as '1d 10h 50m' (spaces between units) and color unit letters (d \u003e h \u003e m emphasis). Apply across Claude/Codex window rows and Gemini 'Resets in …'. Ensure English-only labels and no ugly wrapping.","acceptance_criteria":"- Remaining time displays use spaced units (no '1d10h50m')\\n- Unit letters d/h/m are colored differently with d most prominent\\n- Applied consistently on Dashboard + Current views (Claude/Codex/Gemini)\\n- App builds + make up installs \u0026 relaunches","status":"closed","priority":1,"issue_type":"task","owner":"icedac@gmail.com","estimated_minutes":45,"created_at":"2026-02-06T03:54:09.666405+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T04:03:13.323302+09:00","closed_at":"2026-02-06T04:03:13.323302+09:00","close_reason":"Evidence: xcodebuild Debug build OK (CODE_SIGNING_ALLOWED=NO) + Release build OK (CODE_SIGNING_ALLOWED=NO). Script tests OK: UsageModelsTests, AccountStoreTests, CredentialExporterTests, ProfileSwitcherTests, UsageFetcherTests. Updated Usage duration rendering to show spaced units and colored unit letters (d amber, h blue, m cyan) across UsageWindowRow + Gemini 'Resets in …'.","labels":["phase:review"]}
{"id":"agent-island-kh1.1","title":"State change: phase → review","description":"Set phase to review\n\nReason: Implemented spaced duration display and per-unit (d/h/m) coloring. Verified: xcodebuild Debug build OK (CODE_SIGNING_ALLOWED=NO) + Release build OK (CODE_SIGNING_ALLOWED=NO); script tests OK (UsageModels/AccountStore/CredentialExporter/ProfileSwitcher/UsageFetcher).","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-06T04:03:08.449164+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T04:03:29.093539+09:00","closed_at":"2026-02-06T04:03:29.093539+09:00","close_reason":"Event recorded","dependencies":[{"issue_id":"agent-island-kh1.1","depends_on_id":"agent-island-kh1","type":"parent-child","created_at":"2026-02-06T04:03:08.449783+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-kxb","title":"Usage UI: keep last known account email visible on errors","description":"Goal\n- When a usage fetch fails or a provider reports ERR, keep showing the last known account email (and Claude tier) instead of blank/--.\n\nAcceptance\n- If an account previously showed an email, subsequent refreshes that fail should still show that email for the same account-id.\n- Do not show a previous email for a different account (key by account-id).\n- Works for Current + saved profiles + Dashboard tiles.\n- Build + make up succeed.","status":"closed","priority":1,"issue_type":"bug","owner":"icedac@gmail.com","created_at":"2026-02-06T09:19:04.853651+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T09:24:04.235097+09:00","closed_at":"2026-02-06T09:24:04.235097+09:00","close_reason":"On refresh errors/provider ERR, Usage UI now keeps showing the last known account email (and Claude tier) for the same account-id by remembering identities and backfilling missing fields. Verified: xcodebuild Release build succeeded; make up succeeded (Release build + install to /Applications + relaunch).","labels":["phase:review"]}
{"id":"agent-island-kxb.1","title":"State change: phase → review","description":"Set phase to review\n\nReason: Keep showing last known account email (and Claude tier) on ERR/fetch failures by remembering identities per account-id and filling missing identities from memory. Verified: xcodebuild Release build succeeded; make up succeeded (install + relaunch).","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-06T09:23:58.188122+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T09:24:13.108386+09:00","closed_at":"2026-02-06T09:24:13.108386+09:00","close_reason":"State-change event recorded; no further action.","dependencies":[{"issue_id":"agent-island-kxb.1","depends_on_id":"agent-island-kxb","type":"parent-child","created_at":"2026-02-06T09:23:58.188803+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-l4h","title":"Claude OAuth refresh-token support for usage dashboard","description":"Research and implement refresh-token based Claude usage fetching so usage data survives access-token expiry, then verify with automated tests and evidence.","status":"closed","priority":1,"issue_type":"epic","owner":"icedac@gmail.com","estimated_minutes":300,"created_at":"2026-02-09T15:49:59.30419+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-09T16:00:34.443875+09:00","closed_at":"2026-02-09T16:00:34.443875+09:00","close_reason":"Claude OAuth refresh-token support delivered end-to-end: refresh + retry in usage script, refreshed credential persistence back to account/home files, stable account-id derivation across token churn, and passing verification (targeted tests + xcodebuild).","labels":["phase:review"]}
{"id":"agent-island-l4h.1","title":"Research Claude OAuth refresh flow and credential formats","description":"Inspect current credential schema, Anthropic OAuth endpoints, and claude CLI refresh behavior; document integration constraints and failure modes for agent-island usage fetch.","notes":"Findings: (1) Local Claude CLI binary includes refresh flow function using POST TOKEN_URL=https://platform.claude.com/v1/oauth/token with body {grant_type:refresh_token, refresh_token, client_id, scope}. (2) Existing local ~/.claude/.credentials.json includes claudeAiOauth.{accessToken,refreshToken,expiresAt,scopes,subscriptionType,rateLimitTier}. (3) Vendored check-usage.js currently reads only accessToken for Claude and never attempts refresh; Gemini path already has refresh logic and file persistence pattern we can mirror.","status":"closed","priority":1,"issue_type":"task","owner":"icedac@gmail.com","estimated_minutes":60,"created_at":"2026-02-09T15:50:09.570775+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-09T15:52:30.819578+09:00","closed_at":"2026-02-09T15:52:30.819578+09:00","close_reason":"Research complete: extracted refresh implementation details from local Claude CLI binary (TOKEN_URL platform.claude.com/v1/oauth/token, grant_type=refresh_token, client_id+scope included) and verified local credential schema contains claudeAiOauth.refreshToken/expiresAt.","dependencies":[{"issue_id":"agent-island-l4h.1","depends_on_id":"agent-island-l4h","type":"parent-child","created_at":"2026-02-09T15:50:09.571997+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-l4h.2","title":"Implement Claude refresh-token flow in usage fetch script","description":"Add Claude token refresh using refresh token, persist rotated credentials in temp HOME, and retry usage/profile requests with refreshed access token.","notes":"Implemented in-progress: (a) Claude refresh-token flow in check-usage.js with TOKEN_URL refresh endpoint, proactive expiry refresh, and 401-triggered one-time refresh retry, (b) wrote refreshed claude credentials back to .claude/.credentials.json in Docker HOME, (c) UsageFetcher now syncs updated credential files from temp HOME back to account roots/active home so refresh survives runs.","status":"closed","priority":1,"issue_type":"task","owner":"icedac@gmail.com","estimated_minutes":120,"created_at":"2026-02-09T15:50:19.839339+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-09T15:59:36.557748+09:00","closed_at":"2026-02-09T15:59:36.557748+09:00","close_reason":"Implemented Claude refresh via platform.claude.com/v1/oauth/token with proactive expiry check + 401 retry; persisted refreshed creds from Docker temp HOME back to account/home files; verified with xcodebuild Debug build + script tests (profile-switcher/usage-fetcher/usage-identity-store all OK).","labels":["phase:review"],"dependencies":[{"issue_id":"agent-island-l4h.2","depends_on_id":"agent-island-l4h","type":"parent-child","created_at":"2026-02-09T15:50:19.840603+09:00","created_by":"Zhuge Hyuk"},{"issue_id":"agent-island-l4h.2","depends_on_id":"agent-island-l4h.1","type":"blocks","created_at":"2026-02-09T15:50:19.841769+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-l4h.2.1","title":"State change: phase → review","description":"Set phase to review\n\nReason: Claude refresh-token flow implemented and validated","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-09T15:59:21.390259+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-09T15:59:21.390259+09:00","closed_at":"2026-02-09T15:59:22.390259+09:00","dependencies":[{"issue_id":"agent-island-l4h.2.1","depends_on_id":"agent-island-l4h.2","type":"parent-child","created_at":"2026-02-09T15:59:21.391232+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-l4h.3","title":"Add tests and verification evidence for refresh-token flow","description":"Add deterministic tests for Claude refresh and account-id stability; run verification commands and capture pass evidence.","notes":"Post-close E2E check: ran vendored script in Docker with temp HOME containing forced-expired Claude access token + real refresh token. Result: claude_available=true, claude_error=false, and credential file access token changed from forced value (token_still_forced_docker=false), confirming refresh path executed.","status":"closed","priority":1,"issue_type":"task","owner":"icedac@gmail.com","estimated_minutes":90,"created_at":"2026-02-09T15:50:30.133293+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-09T16:23:44.923584+09:00","closed_at":"2026-02-09T16:00:04.751828+09:00","close_reason":"Added/ran targeted tests: ProfileSwitcherTests (new stable fingerprint cases), UsageFetcherTests, UsageIdentityStoreTests all OK; JS syntax check for check-usage.js OK; full app Debug build succeeded via xcodebuild.","labels":["phase:review"],"dependencies":[{"issue_id":"agent-island-l4h.3","depends_on_id":"agent-island-l4h","type":"parent-child","created_at":"2026-02-09T15:50:30.134244+09:00","created_by":"Zhuge Hyuk"},{"issue_id":"agent-island-l4h.3","depends_on_id":"agent-island-l4h.2","type":"blocks","created_at":"2026-02-09T15:50:30.135452+09:00","created_by":"Zhuge Hyuk"},{"issue_id":"agent-island-l4h.3","depends_on_id":"agent-island-cam","type":"blocks","created_at":"2026-02-09T15:50:44.41369+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-l4h.3.1","title":"State change: phase → review","description":"Set phase to review\n\nReason: Verification artifacts captured for refresh + account-id stability changes","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-09T15:59:50.921603+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-09T15:59:50.921603+09:00","closed_at":"2026-02-09T15:59:51.921603+09:00","dependencies":[{"issue_id":"agent-island-l4h.3.1","depends_on_id":"agent-island-l4h.3","type":"parent-child","created_at":"2026-02-09T15:59:50.92235+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-l4h.4","title":"State change: phase → review","description":"Set phase to review\n\nReason: All child tasks completed with implementation + verification evidence","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-09T16:00:20.305427+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-09T16:00:20.305427+09:00","closed_at":"2026-02-09T16:00:21.305427+09:00","dependencies":[{"issue_id":"agent-island-l4h.4","depends_on_id":"agent-island-l4h","type":"parent-child","created_at":"2026-02-09T16:00:20.306318+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-lue","title":"Same provider/email treated as different current profile","description":"When logging back into an existing provider account, Usage dashboard treats it as a new Current identity instead of matching the saved profile. Repro: login A + save, login B + save, login A again; expected saved profile A becomes live.","status":"closed","priority":1,"issue_type":"bug","owner":"icedac@gmail.com","created_at":"2026-02-09T12:28:42.988746+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-09T12:33:19.255572+09:00","closed_at":"2026-02-09T12:33:19.255572+09:00","close_reason":"Fixed live profile detection and dashboard dedupe by matching provider account identity via normalized email fallback when account IDs differ."}
{"id":"agent-island-o80","title":"Usage dashboard: tabbed profile view (show one at a time)","description":"## Problem\\nProfiles list shows multiple profile cards stacked. Even with compact cards, it eats vertical space and feels cramped.\\n\\n## Expected\\nShow a tabbed selector (Current + saved profiles) and display only one profile's usage card at a time to reclaim space.","status":"closed","priority":1,"issue_type":"feature","owner":"icedac@gmail.com","estimated_minutes":120,"created_at":"2026-02-06T01:10:54.055582+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T01:12:36.780425+09:00","closed_at":"2026-02-06T01:12:36.780425+09:00","close_reason":"Implemented tabbed profile view (Current + saved profiles) so only one profile card is shown at a time; Refresh now updates Current + selected profile (less vertical clutter, fewer docker runs). Verified xcodebuild Debug (CODE_SIGNING_ALLOWED=NO) + Release builds succeeded.","labels":["phase:review"]}
{"id":"agent-island-o80.1","title":"State change: phase → review","description":"Set phase to review\n\nReason: Added tabbed selector (Current + saved profiles) to show one profile at a time; refresh now fetches Current + selected profile only. Verified xcodebuild Debug (CODE_SIGNING_ALLOWED=NO) + Release builds succeeded.","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-06T01:12:30.935584+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T01:12:42.074457+09:00","closed_at":"2026-02-06T01:12:42.074457+09:00","close_reason":"Event recorded","dependencies":[{"issue_id":"agent-island-o80.1","depends_on_id":"agent-island-o80","type":"parent-child","created_at":"2026-02-06T01:12:30.936594+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-ov8","title":"Claude: store CLAUDE_CODE_OAUTH_TOKEN per account and apply on profile switch","description":"Add support for Claude Code long-lived token (from 'claude setup-token'). UI: right-click Claude account to enter/update the token per accountId. Persist it per accountId. When switching to a profile, set/unset global CLAUDE_CODE_OAUTH_TOKEN (via launchctl) based on the profile's Claude account token so Claude Code works even if the CLI oauth expires. Note: this token is not used for usage fetching.","acceptance_criteria":"Right-click Claude card/column -\u003e enter token; token is persisted per accountId; switching profiles sets/unsets CLAUDE_CODE_OAUTH_TOKEN accordingly (best effort, errors surfaced); no impact on usage fetching; build + make up succeed.","status":"closed","priority":0,"issue_type":"feature","owner":"icedac@gmail.com","created_at":"2026-02-06T11:50:05.801101+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T12:17:04.834901+09:00","closed_at":"2026-02-06T12:17:04.834901+09:00","close_reason":"Added Claude Code token editor (right-click Claude column), persisted per accountId in ~/.claude-island/claude-code-tokens.json, and applied on profile switch via launchctl (sets/unsets CLAUDE_CODE_OAUTH_TOKEN; best-effort errors surfaced; never used for usage fetching). Verified: xcodebuild Release build succeeded; make up succeeded (installs to /Applications + relaunch).","labels":["phase:review"]}
{"id":"agent-island-ov8.1","title":"State change: phase → review","description":"Set phase to review\n\nReason: Implemented Claude Code token context-menu editor + per-account store; on profile switch sets/unsets CLAUDE_CODE_OAUTH_TOKEN via launchctl (best-effort, errors surfaced). Verified: xcodebuild Release build succeeded; make up succeeded (install + relaunch).","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-06T12:16:54.857446+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T12:17:18.282345+09:00","closed_at":"2026-02-06T12:17:18.282345+09:00","close_reason":"State-change event recorded; no further action.","dependencies":[{"issue_id":"agent-island-ov8.1","depends_on_id":"agent-island-ov8","type":"parent-child","created_at":"2026-02-06T12:16:54.858052+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-ov9","title":"Claude Code Token: On/Off toggle + env var only when enabled","description":"Implement per-Claude-account Claude Code token status + On/Off toggle in Usage UI.\\n\\nRequirements:\\n- In each Claude card, show Claude Code Token status at the bottom.\\n- If token is set, show an On/Off toggle.\\n- Only when token is set AND On should we apply CLAUDE_CODE_OAUTH_TOKEN to process env + launchctl on profile switch.\\n- Preserve and display last-known identity even on auth errors.\\n- Migrate legacy ~/.claude-island/claude-code-tokens.json into ~/.agent-island even if ~/.agent-island already exists (merge-copy missing files).\\n\\nQuality gates:\\n- xcodebuild Release build passes\\n- relevant unit tests pass","status":"closed","priority":1,"issue_type":"feature","owner":"icedac@gmail.com","estimated_minutes":90,"created_at":"2026-02-06T17:33:34.610571+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T17:51:57.570617+09:00","closed_at":"2026-02-06T17:51:57.570617+09:00","close_reason":"xcodebuild Release build succeeded; test scripts passed (UsageModelsTests, UsageFetcherTests, AccountStoreTests, CredentialExporterTests, ProfileSwitcherTests, ClaudeCodeTokenStoreTests). Implemented Claude Code token footer row with On/Off toggle per Claude account; env var (CLAUDE_CODE_OAUTH_TOKEN) is set/unset via launchctl only when token is set+enabled; improved ~/.claude-island -\u003e ~/.agent-island migration to merge-copy missing items.","labels":["phase:review"]}
{"id":"agent-island-ov9.1","title":"State change: phase → review","description":"Set phase to review\n\nReason: Added Claude Code token On/Off toggle (per Claude account) and gated CLAUDE_CODE_OAUTH_TOKEN export to only when token is set+enabled; improved migration to merge-copy missing files from ~/.claude-island -\u003e ~/.agent-island; added ClaudeCodeTokenStore test script. Verified: xcodebuild Release build OK; scripts tests OK (UsageModels/UsageFetcher/AccountStore/CredentialExporter/ProfileSwitcher/ClaudeCodeTokenStore).","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-06T17:51:43.219102+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T17:53:35.871922+09:00","closed_at":"2026-02-06T17:53:35.871922+09:00","close_reason":"Event recorded","dependencies":[{"issue_id":"agent-island-ov9.1","depends_on_id":"agent-island-ov9","type":"parent-child","created_at":"2026-02-06T17:51:43.219731+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-pbe","title":"usage-identities 중복/손상 정리 및 재발 방지","description":"usage-identities.json에서 동일 provider+email(+claude team type) identity가 여러 accountId로 중복 저장되고, 일부 파일은 invalid JSON 상태까지 발생. 로딩/매칭 불안정. store 단계에서 중복 병합/정규화 및 matcher/team-aware key 반영 필요.","acceptance_criteria":"1) 동일 provider+email(+team)은 1개 identity로 병합된다. 2) claude team/personal은 서로 다른 identity로 분리된다. 3) snapshot 로딩이 invalid JSON에 대해 안전하게 동작(복구 또는 정상 에러 처리)하고 사용자 상태가 깨지지 않는다. 4) 현재 ~/.agent-island/usage-identities.json 중복이 제거된다.","status":"closed","priority":0,"issue_type":"bug","owner":"icedac@gmail.com","estimated_minutes":90,"created_at":"2026-02-09T17:09:34.543038+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-09T17:16:13.857131+09:00","closed_at":"2026-02-09T17:16:13.857131+09:00","close_reason":"Added dedup+team-aware matcher regression tests (2 files), swiftc tests passed (UsageIdentityStoreTests, UsageAccountIdentityMatcherTests, UsageFetcherTests), xcodebuild Debug build succeeded, and cleaned ~/.agent-island/usage-identities.json duplicates + invalid JSON.","labels":["phase:review"]}
{"id":"agent-island-pbe.1","title":"State change: phase → review","description":"Set phase to review\n\nReason: Implemented identity dedup + team-aware matcher and validated with targeted tests/build","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-09T17:16:09.923889+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-09T17:28:50.247205+09:00","closed_at":"2026-02-09T17:28:50.247205+09:00","close_reason":"State transition event consumed during review flow.","dependencies":[{"issue_id":"agent-island-pbe.1","depends_on_id":"agent-island-pbe","type":"parent-child","created_at":"2026-02-09T17:16:09.924758+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-q1y","title":"Usage dashboard: show account email + remaining quota + time windows","description":"## Problem\\nCurrent Usage/Profiles UI shows only compact '5h/7d' numbers (e.g. 1/2) and does not surface which account is logged in. Users want to see:\\n- account identifier (email)\\n- remaining quota (or used+remaining)\\n- time window (5h / 7d) and time until reset\\n\\n## Expected\\nFor each service (Claude/Codex/Gemini), show email (best-effort) and detailed usage lines per window (5h, 7d): percent + reset time remaining, with a simple bar indicator.","status":"closed","priority":0,"issue_type":"feature","owner":"icedac@gmail.com","estimated_minutes":180,"created_at":"2026-02-06T00:46:48.782439+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T00:55:15.767852+09:00","closed_at":"2026-02-06T00:55:15.767852+09:00","close_reason":"Implemented detailed Usage/Profiles cards: show account email (Claude via /api/oauth/profile; Codex/Gemini via JWT email claim), remaining % + reset countdown per window (5h/7d). Verified xcodebuild Debug (CODE_SIGNING_ALLOWED=NO) + Release builds succeeded.","labels":["phase:review"]}
{"id":"agent-island-q1y.1","title":"State change: phase → review","description":"Set phase to review\n\nReason: Usage dashboard now shows per-service email (best-effort) + remaining quota percent + reset countdown for 5h/7d windows. Verified xcodebuild Debug build (CODE_SIGNING_ALLOWED=NO) and Release build succeed.","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-06T00:55:07.144183+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T00:55:27.648428+09:00","closed_at":"2026-02-06T00:55:27.648428+09:00","close_reason":"Event recorded","dependencies":[{"issue_id":"agent-island-q1y.1","depends_on_id":"agent-island-q1y","type":"parent-child","created_at":"2026-02-06T00:55:07.144855+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-uax","title":"Usage: visualize auth token expiry per provider card","description":"Show auth token expiration (time remaining + progress bar) on each provider card (Claude/Codex/Gemini) in Usage dashboard and profile views. Use existing tokenRefresh info (expiresAt/lifetimeSeconds).","acceptance_criteria":"Each provider column shows a token-expiry bar + remaining time; updates live (clock-driven); shows '--' when unavailable; build + make up succeed.","status":"closed","priority":1,"issue_type":"feature","owner":"icedac@gmail.com","created_at":"2026-02-06T09:56:22.098755+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T09:59:51.084508+09:00","closed_at":"2026-02-06T09:59:51.084508+09:00","close_reason":"Evidence: xcodebuild Release build OK (CODE_SIGNING_ALLOWED=NO). Script tests OK: UsageModelsTests, AccountStoreTests, CredentialExporterTests, ProfileSwitcherTests, UsageFetcherTests. make up OK (Release build, installed to /Applications/Claude Island.app, relaunch). Feature: each provider card now shows auth token expiry as a magenta progress bar + live remaining time (uses tokenRefresh expiresAt/lifetimeSeconds), with '--' when unavailable.","labels":["phase:review"]}
{"id":"agent-island-uax.1","title":"State change: phase → review","description":"Set phase to review\n\nReason: Added per-provider token expiry visualization (key icon + magenta progress bar + remaining time) using snapshot.tokenRefresh. Verified: xcodebuild Release build OK (CODE_SIGNING_ALLOWED=NO). Script tests OK: UsageModelsTests, AccountStoreTests, CredentialExporterTests, ProfileSwitcherTests, UsageFetcherTests. make up OK (Release build, installed to /Applications/Claude Island.app, relaunch).","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-06T09:59:45.96791+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T10:13:15.2646+09:00","closed_at":"2026-02-06T10:13:15.2646+09:00","close_reason":"Event recorded","dependencies":[{"issue_id":"agent-island-uax.1","depends_on_id":"agent-island-uax","type":"parent-child","created_at":"2026-02-06T09:59:45.968511+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-ulh","title":"Refresh 후 token 남은 시간 즉시 반영","description":"Claude OAuth access token이 refresh되어 credentials 파일은 갱신되지만, UsageSnapshot.tokenRefresh가 Docker 실행 전 값으로 유지되어 같은 refresh 사이클에 UI 열쇠 남은 시간이 stale로 보임. Docker 실행 후 credentials 재로딩 및 tokenRefresh 재계산이 필요.","acceptance_criteria":"1) refresh 발생한 fetch 사이클에서 tokenRefresh.expiresAt이 갱신 값으로 반환된다. 2) Current/Profile 경로 모두 동일 동작. 3) 기존 캐시/오류 fallback 동작 회귀 없음.","notes":"Paused while addressing higher-priority identity dedup bug (agent-island-pbe).","status":"closed","priority":1,"issue_type":"bug","owner":"icedac@gmail.com","estimated_minutes":60,"created_at":"2026-02-09T17:04:25.102268+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-09T17:28:40.184762+09:00","closed_at":"2026-02-09T17:28:40.184762+09:00","close_reason":"Implemented same-cycle tokenRefresh recompute after docker run (profile/current) and manual force refresh cache bypass. Added UsageFetcher regression tests (forceRefresh bypass, refreshed token expiration); swiftc tests passed (UsageFetcher/IdentityStore/AccountMatcher), xcodebuild Debug build succeeded.","labels":["phase:review"]}
{"id":"agent-island-ulh.1","title":"State change: phase → review","description":"Set phase to review\n\nReason: Added force refresh bypass + post-fetch tokenRefresh recompute with regression tests","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-09T17:28:34.793467+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-09T17:28:50.335341+09:00","closed_at":"2026-02-09T17:28:50.335341+09:00","close_reason":"State transition event consumed during review flow.","dependencies":[{"issue_id":"agent-island-ulh.1","depends_on_id":"agent-island-ulh","type":"parent-child","created_at":"2026-02-09T17:28:34.794513+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-w46","title":"UI: Usage screen dashboard columns layout","description":"Goal\n- Restructure Usage/Profiles screen to show a Dashboard with 3 provider columns: Claude per-account usage | Codex per-account usage | Gemini per-account usage.\n- Keep tabbed window: Current | saved profiles.\n\nAcceptance\n- When a tab is selected, the content shows a Dashboard header and 3 columns with the provider usage for that tab.\n- Current tab shows live creds; saved profile tabs show their snapshots and keep Switch action accessible.\n- Layout is compact, readable, and uses vertical dividers between columns.\n- Builds succeed (Debug CODE_SIGNING_ALLOWED=NO + Release).\n","status":"closed","priority":1,"issue_type":"task","owner":"icedac@gmail.com","estimated_minutes":90,"created_at":"2026-02-06T01:52:58.432174+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T01:59:47.216787+09:00","closed_at":"2026-02-06T01:59:47.216787+09:00","close_reason":"Usage screen now shows Dashboard with 3 provider columns (Claude/Codex/Gemini) and keeps Current|profile tabs; vertical dividers. xcodebuild Debug(CODE_SIGNING_ALLOWED=NO)+Release succeeded; 2 files changed (+182/-193).","labels":["phase:review"]}
{"id":"agent-island-w46.1","title":"State change: phase → review","description":"Set phase to review\n\nReason: Restructured usage screen into Dashboard layout with 3 provider columns; kept Current | saved profile tabs; vertical dividers between columns. Verified xcodebuild Debug(CODE_SIGNING_ALLOWED=NO) + Release build.","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-06T01:59:35.377265+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T01:59:53.947285+09:00","closed_at":"2026-02-06T01:59:53.947285+09:00","close_reason":"State-change event recorded; no further action.","dependencies":[{"issue_id":"agent-island-w46.1","depends_on_id":"agent-island-w46","type":"parent-child","created_at":"2026-02-06T01:59:35.378743+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-wqe","title":"UI: Show Gemini usage as one-line summary","description":"Goal\n- In the usage dashboard, render Gemini as a single concise line: model, bucket count, remaining %, and reset countdown.\n\nAcceptance\n- Gemini card shows a single line (no 5h/7d rows) formatted like: \u003cmodel\u003e \u003ccount\u003e \u003cremaining%\u003e (Resets in \u003ctime\u003e).\n- Other providers unchanged.\n- Builds succeed (Debug CODE_SIGNING_ALLOWED=NO + Release).\n","status":"closed","priority":1,"issue_type":"task","owner":"icedac@gmail.com","estimated_minutes":30,"created_at":"2026-02-06T01:26:10.795337+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T01:27:51.107351+09:00","closed_at":"2026-02-06T01:27:51.107351+09:00","close_reason":"Gemini usage one-line summary; xcodebuild Debug (CODE_SIGNING_ALLOWED=NO) + Release succeeded; 3 files changed (+104/-6).","labels":["phase:review"]}
{"id":"agent-island-wqe.1","title":"State change: phase → review","description":"Set phase to review\n\nReason: Gemini usage card: render one-line summary (model + bucket count + remaining% + reset countdown)","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-06T01:27:30.752064+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T01:28:24.942303+09:00","closed_at":"2026-02-06T01:28:24.942303+09:00","close_reason":"State-change event recorded; no further action.","dependencies":[{"issue_id":"agent-island-wqe.1","depends_on_id":"agent-island-wqe","type":"parent-child","created_at":"2026-02-06T01:27:30.752759+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-z0a","title":"Fix Claude account identity dedupe and subscription metadata display","description":"- Normalize Claude account identity to email-based account IDs (escaped) to prevent duplicate hashed account directories for same provider/email/type (team/personal).\\n- Migrate existing hashed Claude account directories to canonical email-based IDs and update references.\\n- Surface Claude subscription metadata from .credentials.json (subscriptionType, rateLimitTier) in usage UI/card labels.\\n- Add tests for account ID canonicalization/migration and metadata extraction/render plumbing.","status":"closed","priority":1,"issue_type":"bug","owner":"icedac@gmail.com","created_at":"2026-02-09T18:52:17.217808+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-09T19:07:44.920325+09:00","closed_at":"2026-02-09T19:07:44.920325+09:00","close_reason":"xcodebuild Debug build succeeded; script tests passed (ProfileSwitcherTests, UsageFetcherTests, UsageIdentityStoreTests); migration runner validated changed=true then idempotent changed=false; diff 6 files +776/-7","labels":["phase:review"]}
{"id":"agent-island-z0a.1","title":"State change: phase → review","description":"Set phase to review\n\nReason: Implemented Claude account canonical ID migration + subscription metadata fallback; tests/build passed","status":"open","priority":4,"issue_type":"event","created_at":"2026-02-09T19:07:34.86434+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-09T19:07:34.86434+09:00","dependencies":[{"issue_id":"agent-island-z0a.1","depends_on_id":"agent-island-z0a","type":"parent-child","created_at":"2026-02-09T19:07:34.86527+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"agent-island-zb7","title":"Usage: dedupe accounts and keep card height on error","description":"1) Do not show duplicate entries when the same provider uses the same account (dedupe dashboard tiles + reset alert list). 2) Even on ERR / missing provider, keep Usage cards the same size (no collapsing).","acceptance_criteria":"- Dashboard (ALL) shows each provider account only once (no duplicates across profiles)\\n- Reset alert list dedupes same provider+account\\n- ERR/MISSING cards keep same height as normal cards\\n- Builds pass (Debug/Release) and make up installs","status":"closed","priority":1,"issue_type":"task","owner":"icedac@gmail.com","estimated_minutes":45,"created_at":"2026-02-06T08:29:43.495122+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T08:31:08.735563+09:00","closed_at":"2026-02-06T08:31:08.735563+09:00","close_reason":"Evidence: xcodebuild Debug build OK (CODE_SIGNING_ALLOWED=NO) + Release build OK (CODE_SIGNING_ALLOWED=NO). Script tests OK: UsageModelsTests, AccountStoreTests, CredentialExporterTests, ProfileSwitcherTests, UsageFetcherTests. Dedupe: dashboard ALL view now shows each provider account once (keyed by accountId), and reset-alert list dedupes same provider+account+window via stable cycleId. UI: ERR/MISSING no longer collapses cards; provider columns always render usage rows; tile cards reserve the message line height.","labels":["phase:review"]}
{"id":"agent-island-zb7.1","title":"State change: phase → review","description":"Set phase to review\n\nReason: Implemented dedupe (provider+account) for dashboard tiles and reset alerts; kept card heights consistent on ERR/MISSING by always rendering usage rows and reserving error line space. Verified: xcodebuild Debug build OK (CODE_SIGNING_ALLOWED=NO) + Release build OK (CODE_SIGNING_ALLOWED=NO); script tests OK (UsageModels/AccountStore/CredentialExporter/ProfileSwitcher/UsageFetcher).","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-06T08:31:02.904709+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-06T08:31:12.629352+09:00","closed_at":"2026-02-06T08:31:12.629352+09:00","close_reason":"Event recorded","dependencies":[{"issue_id":"agent-island-zb7.1","depends_on_id":"agent-island-zb7","type":"parent-child","created_at":"2026-02-06T08:31:02.90595+09:00","created_by":"Zhuge Hyuk"}]}
